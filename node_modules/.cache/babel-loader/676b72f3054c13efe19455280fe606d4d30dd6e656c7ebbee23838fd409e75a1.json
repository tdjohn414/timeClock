{"ast":null,"code":"import _objectSpread from\"/Users/trevo/Projects/Full Scope Estimating/timeClock/timeClock_v1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{AuthProvider,useAuth}from'./context/AuthContext';import{shiftsAPI,authAPI,adminAPI,localTimeToUTC}from'./services/api';import Login from'./components/Login';import Register from'./components/Register';import'./App.css';// Hardcoded admin email\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ADMIN_EMAIL='tyler@fullscopeestimating.com';function TimeClock(){var _recoveryShift$timeBl,_recoveryShift$timeBl2,_editingShift$date,_editingShift$clock_i,_editingShift$clock_o,_tableData$schema,_dashboardData$hoursT,_dashboardData$hoursT2,_dashboardData$hoursT3,_dashboardData$topEmp,_dashboardData$recent,_viewingShift$timeBlo,_tableData$pagination,_tableData$schema2,_tableData$config,_tableData$rows,_tableData$pagination2;const{user,logout}=useAuth();const[completedBlocks,setCompletedBlocks]=useState([]);const[currentBlock,setCurrentBlock]=useState(null);const[currentTasks,setCurrentTasks]=useState(['']);// Array of task inputs for current block\nconst[editingBlock,setEditingBlock]=useState(null);// For \"going back in time\"\nconst[editingTasks,setEditingTasks]=useState(['']);// Array of task inputs for editing block\nconst[editingOriginalIndex,setEditingOriginalIndex]=useState(null);// Track original position\nconst[swipingBlockId,setSwipingBlockId]=useState(null);const[testBlocks,setTestBlocks]=useState(5);const[testBreaks,setTestBreaks]=useState(2);const[nowOffsetHours,setNowOffsetHours]=useState(0);const[nowOffsetMins,setNowOffsetMins]=useState(0);const[activeTab,setActiveTab]=useState('today');// 'today', 'history', or 'admin'\nconst[adminShifts,setAdminShifts]=useState([]);const[adminLoading,setAdminLoading]=useState(false);const isAdmin=(user===null||user===void 0?void 0:user.email)===ADMIN_EMAIL||(user===null||user===void 0?void 0:user.role)==='admin';// Admin Panel State\nconst[adminSubTab,setAdminSubTab]=useState('dashboard');const[dashboardData,setDashboardData]=useState(null);const[adminUsers,setAdminUsers]=useState([]);const[adminUsersLoading,setAdminUsersLoading]=useState(false);const[adminUsersPagination,setAdminUsersPagination]=useState({page:1,limit:25,total:0});const[adminShiftsPagination,setAdminShiftsPagination]=useState({page:1,limit:25,total:0});const[adminShiftsFilters,setAdminShiftsFilters]=useState({userId:'',startDate:'',endDate:''});const[editingShift,setEditingShift]=useState(null);const[viewingShift,setViewingShift]=useState(null);const[viewingShiftLoading,setViewingShiftLoading]=useState(false);const[creatingShift,setCreatingShift]=useState(false);const[newShiftData,setNewShiftData]=useState({userId:'',date:new Date().toISOString().split('T')[0],clockInTime:'08:00',clockOutTime:'17:00',timeBlocks:[{id:Date.now(),startTime:'08:00',endTime:'17:00',tasks:'',isBreak:false}]});const[savingShift,setSavingShift]=useState(false);const[editingUser,setEditingUser]=useState(null);const[creatingUser,setCreatingUser]=useState(false);const[newUserData,setNewUserData]=useState({email:'',password:'',name:'',role:'user',status:'active'});const[dbTables,setDbTables]=useState([]);const[selectedTable,setSelectedTable]=useState(null);const[tableData,setTableData]=useState({rows:[],pagination:{},schema:[],config:{}});const[tableLoading,setTableLoading]=useState(false);const[editingRow,setEditingRow]=useState(null);const[deleteConfirm,setDeleteConfirm]=useState(null);const[deleteConfirmText,setDeleteConfirmText]=useState('');const[adminToast,setAdminToast]=useState(null);const[currentDate,setCurrentDate]=useState(()=>{const now=new Date();const year=now.getFullYear();const month=String(now.getMonth()+1).padStart(2,'0');const day=String(now.getDate()).padStart(2,'0');return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);});const[shifts,setShifts]=useState([]);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[toast,setToast]=useState(null);// { shift, message }\nconst[expandedShifts,setExpandedShifts]=useState(new Set());// Track expanded shift IDs\nconst[showPreviewModal,setShowPreviewModal]=useState(false);const[previewShiftData,setPreviewShiftData]=useState(null);const[showGapModal,setShowGapModal]=useState(false);const[gapData,setGapData]=useState(null);// { startTime, endTime, pendingBlocks, gapIndex }\nconst[gapTasks,setGapTasks]=useState(['']);const[blocksBeforeEdit,setBlocksBeforeEdit]=useState(null);// For restoring on gap cancel\nconst[showUserDropdown,setShowUserDropdown]=useState(false);const dropdownRef=useRef(null);const[showPasswordModal,setShowPasswordModal]=useState(false);const[passwordData,setPasswordData]=useState({current:'',new:'',confirm:''});const[passwordError,setPasswordError]=useState('');const[passwordSuccess,setPasswordSuccess]=useState(false);const[changingPassword,setChangingPassword]=useState(false);const[showEmailModal,setShowEmailModal]=useState(false);const[emailData,setEmailData]=useState({newEmail:'',password:''});const[emailError,setEmailError]=useState('');const[emailSuccess,setEmailSuccess]=useState(false);const[changingEmail,setChangingEmail]=useState(false);const[resetPasswordUser,setResetPasswordUser]=useState(null);const[resetPasswordValue,setResetPasswordValue]=useState('');const[resettingPassword,setResettingPassword]=useState(false);// Auto-save state\nconst[pendingShiftId,setPendingShiftId]=useState(null);const[autoSaveStatus,setAutoSaveStatus]=useState('idle');// 'idle', 'saving', 'saved', 'error'\nconst[showRecoveryModal,setShowRecoveryModal]=useState(false);const[recoveryShift,setRecoveryShift]=useState(null);const[showDiscardConfirm,setShowDiscardConfirm]=useState(false);useEffect(()=>{const loadShifts=async()=>{try{const data=await shiftsAPI.getAll();setShifts(data);}catch(err){console.error('Failed to load shifts:',err);}finally{setLoading(false);}};loadShifts();},[]);// Set default tab to admin for admin users\nuseEffect(()=>{if(isAdmin){setActiveTab('admin');}},[isAdmin]);// Check for pending shift on load (for recovery)\nuseEffect(()=>{const checkPendingShift=async()=>{try{const pending=await shiftsAPI.getPending();if(pending&&pending.id){setRecoveryShift(pending);setShowRecoveryModal(true);}}catch(err){console.error('Failed to check pending shift:',err);}};checkPendingShift();},[]);// Load admin data when admin tab is selected\nuseEffect(()=>{if(activeTab==='admin'&&isAdmin){if(adminSubTab==='dashboard'&&!dashboardData){loadDashboard();}else if(adminSubTab==='users'&&adminUsers.length===0){loadAdminUsers();}else if(adminSubTab==='shifts'&&adminShifts.length===0){loadAdminShifts();}else if(adminSubTab==='database'&&dbTables.length===0){loadDbTables();}}},[activeTab,adminSubTab,isAdmin]);const loadDashboard=async()=>{setAdminLoading(true);try{const data=await adminAPI.getDashboard();setDashboardData(data);}catch(err){console.error('Failed to load dashboard:',err);setAdminToast({type:'error',message:'Failed to load dashboard'});}finally{setAdminLoading(false);}};const loadAdminUsers=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;setAdminUsersLoading(true);try{const data=await adminAPI.getUsers({page,limit:25});setAdminUsers(data.users);setAdminUsersPagination(data.pagination);}catch(err){console.error('Failed to load users:',err);setAdminToast({type:'error',message:'Failed to load users'});}finally{setAdminUsersLoading(false);}};const loadAdminShifts=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;setAdminLoading(true);try{const params=_objectSpread({page,limit:25},adminShiftsFilters);Object.keys(params).forEach(k=>!params[k]&&delete params[k]);const data=await adminAPI.getShifts(params);setAdminShifts(data.shifts.map(s=>_objectSpread(_objectSpread({},s),{},{userName:s.user_name,userEmail:s.user_email})));setAdminShiftsPagination(data.pagination);}catch(err){console.error('Failed to load shifts:',err);setAdminToast({type:'error',message:'Failed to load shifts'});}finally{setAdminLoading(false);}};const loadDbTables=async()=>{setTableLoading(true);try{const data=await adminAPI.getTables();setDbTables(data.tables);}catch(err){console.error('Failed to load tables:',err);setAdminToast({type:'error',message:'Failed to load database tables'});}finally{setTableLoading(false);}};const loadTableData=async function(tableName){let page=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setTableLoading(true);try{const data=await adminAPI.getTableData(tableName,{page,limit:25});setTableData(data);setSelectedTable(tableName);}catch(err){console.error('Failed to load table data:',err);setAdminToast({type:'error',message:'Failed to load table data'});}finally{setTableLoading(false);}};const handleUpdateUser=async(userId,updates)=>{try{await adminAPI.updateUser(userId,updates);setAdminToast({type:'success',message:'User updated successfully'});setEditingUser(null);loadAdminUsers(adminUsersPagination.page);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to update user'});}};const handleCreateUser=async()=>{try{if(!newUserData.email||!newUserData.password||!newUserData.name){setAdminToast({type:'error',message:'Email, password, and name are required'});return;}if(newUserData.password.length<6){setAdminToast({type:'error',message:'Password must be at least 6 characters'});return;}await adminAPI.createUser(newUserData);setAdminToast({type:'success',message:'User created successfully'});setCreatingUser(false);setNewUserData({email:'',password:'',name:'',role:'user',status:'active'});loadAdminUsers(1);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to create user'});}};const handleDeactivateUser=async userId=>{if(deleteConfirmText!=='DELETE')return;try{await adminAPI.deactivateUser(userId);setAdminToast({type:'success',message:'User deactivated'});setDeleteConfirm(null);setDeleteConfirmText('');loadAdminUsers(adminUsersPagination.page);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to deactivate user'});}};const handleCreateShift=async()=>{if(!newShiftData.userId){setAdminToast({type:'error',message:'Please select a user'});return;}if(!newShiftData.date||!newShiftData.clockInTime){setAdminToast({type:'error',message:'Date and clock in time are required'});return;}if(newShiftData.timeBlocks.length===0){setAdminToast({type:'error',message:'Please add at least one time block'});return;}setSavingShift(true);try{// Calculate total hours from time blocks\nlet totalMinutes=0;for(const block of newShiftData.timeBlocks){if(block.startTime&&block.endTime&&!block.isBreak){const[startH,startM]=block.startTime.split(':').map(Number);const[endH,endM]=block.endTime.split(':').map(Number);let mins=endH*60+endM-(startH*60+startM);if(mins<0)mins+=24*60;// overnight\ntotalMinutes+=mins;}}const totalHours=(totalMinutes/60).toFixed(2);await adminAPI.createShift({userId:parseInt(newShiftData.userId),date:newShiftData.date,clockInTime:localTimeToUTC(newShiftData.clockInTime,newShiftData.date),clockOutTime:localTimeToUTC(newShiftData.clockOutTime,newShiftData.date),totalHours:parseFloat(totalHours),timeBlocks:newShiftData.timeBlocks.map(b=>({startTime:localTimeToUTC(b.startTime,newShiftData.date),endTime:localTimeToUTC(b.endTime,newShiftData.date),tasks:b.tasks,isBreak:b.isBreak}))});setAdminToast({type:'success',message:'Shift created successfully'});setCreatingShift(false);setNewShiftData({userId:'',date:new Date().toISOString().split('T')[0],clockInTime:'08:00',clockOutTime:'17:00',timeBlocks:[{id:Date.now(),startTime:'08:00',endTime:'17:00',tasks:'',isBreak:false}]});loadAdminShifts(1);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to create shift'});}finally{setSavingShift(false);}};const addNewShiftBlock=()=>{const lastBlock=newShiftData.timeBlocks[newShiftData.timeBlocks.length-1];const newStartTime=(lastBlock===null||lastBlock===void 0?void 0:lastBlock.endTime)||'08:00';setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{timeBlocks:[...newShiftData.timeBlocks,{id:Date.now(),startTime:newStartTime,endTime:'',tasks:'',isBreak:false}]}));};const updateNewShiftBlock=(blockId,field,value)=>{setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{timeBlocks:newShiftData.timeBlocks.map(b=>b.id===blockId?_objectSpread(_objectSpread({},b),{},{[field]:value}):b)}));};const removeNewShiftBlock=blockId=>{if(newShiftData.timeBlocks.length<=1)return;setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{timeBlocks:newShiftData.timeBlocks.filter(b=>b.id!==blockId)}));};const viewShiftDetails=async shiftId=>{try{setViewingShiftLoading(true);const shift=await adminAPI.getShift(shiftId);setViewingShift(shift);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to load shift details'});}finally{setViewingShiftLoading(false);}};const handleUpdateShift=async(shiftId,updates)=>{try{await adminAPI.updateShift(shiftId,updates);setAdminToast({type:'success',message:'Shift updated successfully'});setEditingShift(null);loadAdminShifts(adminShiftsPagination.page);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to update shift'});}};const handleDeleteShift=async shiftId=>{if(deleteConfirmText!=='DELETE')return;try{await adminAPI.deleteShift(shiftId);setAdminToast({type:'success',message:'Shift deleted'});setDeleteConfirm(null);setDeleteConfirmText('');loadAdminShifts(adminShiftsPagination.page);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to delete shift'});}};const handleUpdateRow=async(tableName,rowId,updates)=>{try{await adminAPI.updateTableRow(tableName,rowId,updates);setAdminToast({type:'success',message:'Row updated successfully'});setEditingRow(null);loadTableData(tableName,tableData.pagination.page);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to update row'});}};const handleDeleteRow=async(tableName,rowId)=>{if(deleteConfirmText!=='DELETE')return;try{await adminAPI.deleteTableRow(tableName,rowId);setAdminToast({type:'success',message:'Row deleted'});setDeleteConfirm(null);setDeleteConfirmText('');loadTableData(tableName,tableData.pagination.page);}catch(err){setAdminToast({type:'error',message:err.message||'Failed to delete row'});}};const handleExport=async type=>{try{await adminAPI.downloadExport(_objectSpread({type},adminShiftsFilters));setAdminToast({type:'success',message:'Export downloaded'});}catch(err){setAdminToast({type:'error',message:'Export failed'});}};// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setShowUserDropdown(false);}};if(showUserDropdown){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showUserDropdown]);// Get actual current time (no offset)\nconst getActualTime=()=>{const now=new Date();const hours=String(now.getHours()).padStart(2,'0');const minutes=String(now.getMinutes()).padStart(2,'0');return\"\".concat(hours,\":\").concat(minutes);};// Get start time for \"Now\" - uses previous block's end time if available\nconst getStartTime=()=>{// If there are completed blocks, continue from last one's end time\nif(completedBlocks.length>0){const lastBlock=completedBlocks[completedBlocks.length-1];if(lastBlock.endTime){return lastBlock.endTime;}}// Otherwise use actual current time\nreturn getActualTime();};// Get end time = start time + offset (for \"Now\" on end time field)\nconst getEndTimeWithOffset=startTime=>{if(!startTime)return getActualTime();const[h,m]=startTime.split(':').map(Number);const baseTime=new Date(2000,0,1,h,m);// Add offset to get end time\nbaseTime.setHours(baseTime.getHours()+nowOffsetHours);baseTime.setMinutes(baseTime.getMinutes()+nowOffsetMins);const hours=String(baseTime.getHours()).padStart(2,'0');const minutes=String(baseTime.getMinutes()).padStart(2,'0');return\"\".concat(hours,\":\").concat(minutes);};// Increment end time - if no end time, use start time as base\nconst incrementEndTime=(block,updateFn,minutes)=>{const baseTime=block.endTime||block.startTime;if(!baseTime)return;const newTime=addMinutesToTime(baseTime,minutes);updateFn('endTime',newTime);};const addMinutesToTime=(time,minutesToAdd)=>{const[hours,minutes]=time.split(':').map(Number);const date=new Date(2000,0,1,hours,minutes);date.setMinutes(date.getMinutes()+minutesToAdd);return\"\".concat(String(date.getHours()).padStart(2,'0'),\":\").concat(String(date.getMinutes()).padStart(2,'0'));};const calculateBlockHours=(startTime,endTime)=>{if(!startTime||!endTime)return null;// Normalize time strings (handle HH:MM:SS and HH:MM formats)\nconst normalizeTime=t=>{if(typeof t!=='string')return t;// Take only HH:MM part\nreturn t.split(':').slice(0,2).join(':');};const start=normalizeTime(startTime);const end=normalizeTime(endTime);const startDate=new Date(\"2000-01-01T\".concat(start,\":00\"));let endDate=new Date(\"2000-01-01T\".concat(end,\":00\"));// Handle midnight crossing (e.g., 22:00 to 00:00)\nif(endDate<=startDate){endDate=new Date(\"2000-01-02T\".concat(end,\":00\"));}const diffMs=endDate-startDate;const diffHours=diffMs/(1000*60*60);return diffHours>0?diffHours.toFixed(2):'0.00';};const handleClockIn=async()=>{try{const clockInTime=getStartTime();// Create pending shift on server - convert to UTC for storage\nconst shift=await shiftsAPI.clockIn(currentDate,localTimeToUTC(clockInTime,currentDate));setPendingShiftId(shift.id);const newBlock={id:Date.now(),startTime:clockInTime,endTime:'',tasks:''};setCurrentBlock(newBlock);setCurrentTasks(['']);}catch(err){console.error('Failed to clock in:',err);alert('Failed to start shift: '+err.message);}};// Join tasks array into a string, filtering empty entries\nconst joinTasks=tasksArray=>{return tasksArray.filter(t=>t.trim()).join(' • ');};const handleAdvanceBlock=async()=>{if(!currentBlock||!currentBlock.endTime)return;// Join tasks before completing\nconst completedBlock=_objectSpread(_objectSpread({},currentBlock),{},{tasks:joinTasks(currentTasks)});// Trigger swipe animation\nsetSwipingBlockId(currentBlock.id);setTimeout(async()=>{// Save block to server if we have a pending shift\nif(pendingShiftId){try{setAutoSaveStatus('saving');const savedBlock=await shiftsAPI.addBlock(pendingShiftId,{startTime:localTimeToUTC(completedBlock.startTime,currentDate),endTime:localTimeToUTC(completedBlock.endTime,currentDate),tasks:completedBlock.tasks,isBreak:completedBlock.isBreak||false});// Update local block with server ID\ncompletedBlock.serverId=savedBlock.id;setAutoSaveStatus('saved');setTimeout(()=>setAutoSaveStatus('idle'),2000);}catch(err){console.error('Failed to save block:',err);setAutoSaveStatus('error');setTimeout(()=>setAutoSaveStatus('idle'),3000);}}// Move current block to completed\nsetCompletedBlocks([...completedBlocks,completedBlock]);// Create new current block with previous end time as start\nconst newBlock={id:Date.now(),startTime:currentBlock.endTime,endTime:'',tasks:''};setCurrentBlock(newBlock);setCurrentTasks(['']);setSwipingBlockId(null);setEditingBlock(null);},400);};const handleBreak=async()=>{if(!currentBlock)return;// Break starts where current block ends (or use current block's end time if set)\n// Do NOT use getActualTime() here - breaks should continue from last block\nlet breakStartTime;if(currentBlock.endTime){breakStartTime=currentBlock.endTime;}else if(completedBlocks.length>0){// Use end time of last completed block\nbreakStartTime=completedBlocks[completedBlocks.length-1].endTime;}else{// Fallback: use current block's start time\nbreakStartTime=currentBlock.startTime;}const breakEndTime=addMinutesToTime(breakStartTime,15);// Complete current block first if it has content\nconst joinedTasks=joinTasks(currentTasks);let updatedBlocks=[...completedBlocks];if(currentBlock.startTime&&joinedTasks){const workBlock=_objectSpread(_objectSpread({},currentBlock),{},{tasks:joinedTasks,endTime:breakStartTime});// Save work block to server if we have a pending shift\nif(pendingShiftId){try{const savedBlock=await shiftsAPI.addBlock(pendingShiftId,{startTime:localTimeToUTC(workBlock.startTime,currentDate),endTime:localTimeToUTC(workBlock.endTime,currentDate),tasks:workBlock.tasks,isBreak:false});workBlock.serverId=savedBlock.id;}catch(err){console.error('Failed to save work block:',err);}}updatedBlocks=[...completedBlocks,workBlock];setCompletedBlocks(updatedBlocks);}// Create break block and immediately complete it\nconst breakBlock={id:Date.now(),startTime:breakStartTime,endTime:breakEndTime,tasks:'15 min Break',isBreak:true};setSwipingBlockId(breakBlock.id);setTimeout(async()=>{// Save break block to server\nif(pendingShiftId){try{setAutoSaveStatus('saving');const savedBreak=await shiftsAPI.addBlock(pendingShiftId,{startTime:localTimeToUTC(breakBlock.startTime,currentDate),endTime:localTimeToUTC(breakBlock.endTime,currentDate),tasks:breakBlock.tasks,isBreak:true});breakBlock.serverId=savedBreak.id;setAutoSaveStatus('saved');setTimeout(()=>setAutoSaveStatus('idle'),2000);}catch(err){console.error('Failed to save break:',err);setAutoSaveStatus('error');setTimeout(()=>setAutoSaveStatus('idle'),3000);}}setCompletedBlocks(prev=>[...prev,breakBlock]);// Create new current block starting after break\nconst newBlock={id:Date.now()+1,startTime:breakEndTime,endTime:'',tasks:''};setCurrentBlock(newBlock);setCurrentTasks(['']);setSwipingBlockId(null);},400);};const updateCurrentBlock=(field,value)=>{setCurrentBlock(_objectSpread(_objectSpread({},currentBlock),{},{[field]:value}));};const updateEditingBlock=(field,value)=>{setEditingBlock(_objectSpread(_objectSpread({},editingBlock),{},{[field]:value}));};const handleEditBlock=block=>{// Track original position before removing\nconst originalIndex=completedBlocks.findIndex(b=>b.id===block.id);setEditingOriginalIndex(originalIndex);// Save current block state and edit the selected block\nsetEditingBlock(block);// Split existing tasks string into array for editing (skip for breaks)\nconst tasksArray=block.isBreak?['']:block.tasks?block.tasks.split(' • '):[''];setEditingTasks(tasksArray.length>0?tasksArray:['']);// Remove from completed blocks\nsetCompletedBlocks(completedBlocks.filter(b=>b.id!==block.id));};// Helper to compare times accounting for overnight shifts\nconst timeToMinutes=time=>{if(!time)return 0;const[h,m]=time.split(':').map(Number);return h*60+m;};// Process blocks after edit - handle overlaps and gaps\nconst processBlocksAfterEdit=(blocks,savedBlock,insertIndex)=>{let updatedBlocks=[...blocks];updatedBlocks.splice(insertIndex,0,savedBlock);const editedEndMinutes=timeToMinutes(savedBlock.endTime);// Check if there's a next block\nif(insertIndex+1<updatedBlocks.length){const nextBlock=updatedBlocks[insertIndex+1];const nextStartMinutes=timeToMinutes(nextBlock.startTime);// Handle overlaps\nif(editedEndMinutes>nextStartMinutes){// Complete overlap - remove blocks\nlet i=insertIndex+1;while(i<updatedBlocks.length){const block=updatedBlocks[i];const blockStartMinutes=timeToMinutes(block.startTime);const blockEndMinutes=timeToMinutes(block.endTime);if(editedEndMinutes>=blockEndMinutes){updatedBlocks.splice(i,1);}else if(editedEndMinutes>blockStartMinutes){updatedBlocks[i]=_objectSpread(_objectSpread({},block),{},{startTime:savedBlock.endTime});i++;}else{break;}}return{blocks:updatedBlocks,gap:null};}// Handle gap - edited end time is BEFORE next block's start\nif(editedEndMinutes<nextStartMinutes){return{blocks:updatedBlocks,gap:{startTime:savedBlock.endTime,endTime:nextBlock.startTime,gapIndex:insertIndex+1}};}}return{blocks:updatedBlocks,gap:null};};const handleSaveEdit=()=>{if(!editingBlock)return;// Save original blocks in case we need to restore on gap cancel\n// Include the editing block at its original position\nconst originalBlocks=[...completedBlocks];originalBlocks.splice(editingOriginalIndex,0,editingBlock);setBlocksBeforeEdit(originalBlocks);// Join tasks before saving (keep original for breaks)\nconst savedBlock=_objectSpread(_objectSpread({},editingBlock),{},{tasks:editingBlock.isBreak?editingBlock.tasks:joinTasks(editingTasks)});// Swipe the edited block back to completed\nsetSwipingBlockId(editingBlock.id);setTimeout(()=>{const insertIndex=Math.min(editingOriginalIndex,completedBlocks.length);const result=processBlocksAfterEdit(completedBlocks,savedBlock,insertIndex);if(result.gap){// There's a gap - show modal to fill it\nsetGapData(_objectSpread(_objectSpread({},result.gap),{},{pendingBlocks:result.blocks}));setGapTasks(['']);setShowGapModal(true);}else{setCompletedBlocks(result.blocks);setBlocksBeforeEdit(null);// If the edited block is the last block and there's a current block,\n// update the current block's start time to match the edited block's end time\nconst lastBlock=result.blocks[result.blocks.length-1];if(currentBlock&&lastBlock&&lastBlock.id===savedBlock.id&&savedBlock.endTime){setCurrentBlock(prev=>_objectSpread(_objectSpread({},prev),{},{startTime:savedBlock.endTime}));}}setEditingBlock(null);setEditingTasks(['']);setEditingOriginalIndex(null);setSwipingBlockId(null);},400);};// Handle filling a gap\nconst handleFillGap=()=>{if(!gapData)return;const gapBlock={id:Date.now(),startTime:gapData.startTime,endTime:gapData.endTime,tasks:joinTasks(gapTasks),isBreak:false};// Insert the gap block\nlet updatedBlocks=[...gapData.pendingBlocks];updatedBlocks.splice(gapData.gapIndex,0,gapBlock);// Check if this creates another gap or overlap\nconst gapEndMinutes=timeToMinutes(gapBlock.endTime);const nextIndex=gapData.gapIndex+1;if(nextIndex<updatedBlocks.length){const nextBlock=updatedBlocks[nextIndex];const nextStartMinutes=timeToMinutes(nextBlock.startTime);// Still a gap?\nif(gapEndMinutes<nextStartMinutes){setGapData({startTime:gapBlock.endTime,endTime:nextBlock.startTime,pendingBlocks:updatedBlocks,gapIndex:nextIndex});setGapTasks(['']);return;// Keep modal open\n}// Overlap? Adjust next block\nif(gapEndMinutes>nextStartMinutes){updatedBlocks[nextIndex]=_objectSpread(_objectSpread({},nextBlock),{},{startTime:gapBlock.endTime});}}setCompletedBlocks(updatedBlocks);setShowGapModal(false);setGapData(null);setGapTasks(['']);setBlocksBeforeEdit(null);};const handleCancelGap=()=>{// Cancel gap fill - restore blocks to state before the edit\nif(blocksBeforeEdit){setCompletedBlocks(blocksBeforeEdit);}setShowGapModal(false);setGapData(null);setGapTasks(['']);setBlocksBeforeEdit(null);};const handleCancelEdit=()=>{// Restore the editing block to completed at original position\nif(editingBlock){const updatedBlocks=[...completedBlocks];const insertIndex=Math.min(editingOriginalIndex!==null&&editingOriginalIndex!==void 0?editingOriginalIndex:updatedBlocks.length,updatedBlocks.length);updatedBlocks.splice(insertIndex,0,editingBlock);setCompletedBlocks(updatedBlocks);}setEditingBlock(null);setEditingTasks(['']);setEditingOriginalIndex(null);};const removeCompletedBlock=id=>{setCompletedBlocks(completedBlocks.filter(b=>b.id!==id));};const handleChangePassword=async()=>{setPasswordError('');if(!passwordData.current||!passwordData.new||!passwordData.confirm){setPasswordError('All fields are required');return;}if(passwordData.new!==passwordData.confirm){setPasswordError('New passwords do not match');return;}if(passwordData.new.length<6){setPasswordError('New password must be at least 6 characters');return;}setChangingPassword(true);try{await authAPI.changePassword(passwordData.current,passwordData.new);setPasswordSuccess(true);setPasswordData({current:'',new:'',confirm:''});setTimeout(()=>{setShowPasswordModal(false);setPasswordSuccess(false);},2000);}catch(err){setPasswordError(err.message||'Failed to change password');}finally{setChangingPassword(false);}};const closePasswordModal=()=>{setShowPasswordModal(false);setPasswordData({current:'',new:'',confirm:''});setPasswordError('');setPasswordSuccess(false);};const handleChangeEmail=async()=>{setEmailError('');if(!emailData.newEmail||!emailData.password){setEmailError('Email and password are required');return;}const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(emailData.newEmail)){setEmailError('Invalid email format');return;}setChangingEmail(true);try{const result=await authAPI.changeEmail(emailData.newEmail,emailData.password);// Update token in localStorage\nif(result.token){localStorage.setItem('token',result.token);}setEmailSuccess(true);setEmailData({newEmail:'',password:''});setTimeout(()=>{setShowEmailModal(false);setEmailSuccess(false);// Reload to update user info\nwindow.location.reload();},2000);}catch(err){setEmailError(err.message||'Failed to change email');}finally{setChangingEmail(false);}};const closeEmailModal=()=>{setShowEmailModal(false);setEmailData({newEmail:'',password:''});setEmailError('');setEmailSuccess(false);};const handleAdminResetPassword=async()=>{if(!resetPasswordValue||resetPasswordValue.length<6){setAdminToast({type:'error',message:'Password must be at least 6 characters'});return;}setResettingPassword(true);try{await adminAPI.resetUserPassword(resetPasswordUser.id,resetPasswordValue);setAdminToast({type:'success',message:\"Password reset for \".concat(resetPasswordUser.name)});setResetPasswordUser(null);setResetPasswordValue('');}catch(err){setAdminToast({type:'error',message:err.message||'Failed to reset password'});}finally{setResettingPassword(false);}};const closeResetPasswordModal=()=>{setResetPasswordUser(null);setResetPasswordValue('');};const clientTasks=['Fixed responsive layout issues on mobile','Implemented form validation for user inputs','Added loading spinners and skeleton screens','Debugged API integration issues','Optimized React component rendering','Styled buttons and input components','Created reusable modal component','Fixed CSS grid alignment on dashboard','Implemented state management for cart','Added error handling for fetch requests','Built date picker component','Fixed cross-browser compatibility issues','Implemented infinite scroll pagination','Added toast notifications system','Refactored authentication flow'];const generateTestShift=()=>{const blocks=[];let currentHour=8;let currentMinute=0;let breakCount=0;const totalBlocks=testBlocks+testBreaks;const breakInterval=Math.floor(totalBlocks/(testBreaks+1));for(let i=0;i<totalBlocks;i++){const startTime=\"\".concat(String(currentHour).padStart(2,'0'),\":\").concat(String(currentMinute).padStart(2,'0'));const isBreak=breakCount<testBreaks&&(i+1)%breakInterval===0;const duration=isBreak?15:45+Math.floor(Math.random()*45);currentMinute+=duration;while(currentMinute>=60){currentHour++;currentMinute-=60;}const endTime=\"\".concat(String(currentHour).padStart(2,'0'),\":\").concat(String(currentMinute).padStart(2,'0'));if(isBreak){blocks.push({id:Date.now()+i,startTime,endTime,tasks:'15 min Break',isBreak:true});breakCount++;}else{blocks.push({id:Date.now()+i,startTime,endTime,tasks:clientTasks[Math.floor(Math.random()*clientTasks.length)]});}}// All but last go to completed, last becomes current\nif(blocks.length>0){setCompletedBlocks(blocks.slice(0,-1));const lastBlock=blocks[blocks.length-1];setCurrentBlock(_objectSpread(_objectSpread({},lastBlock),{},{endTime:''// Make it editable\n}));// Set the tasks array from the last block\nsetCurrentTasks(lastBlock.tasks?[lastBlock.tasks]:['']);}setEditingBlock(null);setEditingTasks(['']);};const clearAll=()=>{setCompletedBlocks([]);setCurrentBlock(null);setCurrentTasks(['']);setEditingBlock(null);setEditingTasks(['']);setPendingShiftId(null);setAutoSaveStatus('idle');};const calculateTotalHours=()=>{let total=0;[...completedBlocks,currentBlock].filter(Boolean).forEach(block=>{const hrs=calculateBlockHours(block.startTime,block.endTime);if(hrs)total+=parseFloat(hrs);});return total.toFixed(2);};// Preview shift before saving - shows confirmation modal\nconst previewShift=()=>{const allBlocks=[...completedBlocks];// Include current block only if fully filled out (start time, end time, AND tasks)\n// This ignores placeholder blocks that only have a start time from \"Next Block\"\nconst currentJoinedTasks=joinTasks(currentTasks);if(currentBlock&&currentBlock.startTime&&currentBlock.endTime&&currentJoinedTasks){allBlocks.push(_objectSpread(_objectSpread({},currentBlock),{},{tasks:currentJoinedTasks}));}const validBlocks=allBlocks.filter(block=>block.startTime&&block.endTime&&block.tasks);if(validBlocks.length===0){alert('Please add at least one complete time block (start time, end time, and tasks)');return;}// Don't sort - preserve the order user entered them (handles overnight shifts correctly)\nconst clockInTime=validBlocks[0].startTime;const clockOutTime=validBlocks[validBlocks.length-1].endTime||validBlocks[validBlocks.length-1].startTime;const totalHours=calculateTotalHours();const shiftData={date:currentDate,clockInTime,clockOutTime,totalHours,timeBlocks:validBlocks};setPreviewShiftData(shiftData);setShowPreviewModal(true);};// Actually save the shift after confirmation (Clock Out)\nconst confirmSave=async()=>{if(!previewShiftData)return;setSaving(true);try{let completedShift;if(pendingShiftId){// Save any unsaved current block before clock out\n// The current block is included in previewShiftData.timeBlocks but may not have been saved yet\nconst currentJoinedTasks=joinTasks(currentTasks);if(currentBlock&&currentBlock.startTime&&currentBlock.endTime&&currentJoinedTasks){// Check if this block was already saved (exists in completedBlocks)\nconst alreadySaved=completedBlocks.some(b=>b.id===currentBlock.id);if(!alreadySaved){await shiftsAPI.addBlock(pendingShiftId,{startTime:localTimeToUTC(currentBlock.startTime,previewShiftData.date),endTime:localTimeToUTC(currentBlock.endTime,previewShiftData.date),tasks:currentJoinedTasks,isBreak:currentBlock.isBreak||false});}}// Complete the pending shift (clock out) - convert to UTC\n// Send both clockInTime (from first block) and clockOutTime (from last block)\ncompletedShift=await shiftsAPI.clockOut(pendingShiftId,localTimeToUTC(previewShiftData.clockInTime,previewShiftData.date),localTimeToUTC(previewShiftData.clockOutTime,previewShiftData.date),previewShiftData.totalHours);}else{// Fallback: create new shift (shouldn't happen with new flow)\ncompletedShift=await shiftsAPI.create(previewShiftData);}setShifts([completedShift,...shifts]);// Show toast with preview\nsetToast({message:'Shift saved successfully!',shift:previewShiftData});setTimeout(()=>setToast(null),5000);setShowPreviewModal(false);setPreviewShiftData(null);clearAll();}catch(err){alert('Failed to save shift: '+err.message);}finally{setSaving(false);}};const cancelPreview=()=>{setShowPreviewModal(false);setPreviewShiftData(null);};// Recovery modal handlers\nconst handleResumeRecovery=()=>{if(!recoveryShift)return;// Set the pending shift ID\nsetPendingShiftId(recoveryShift.id);setCurrentDate(recoveryShift.date);// Load saved blocks into completed blocks\nconst savedBlocks=recoveryShift.timeBlocks||[];setCompletedBlocks(savedBlocks.map(block=>_objectSpread(_objectSpread({},block),{},{serverId:block.id})));// Create a new current block starting from last block's end time\nif(savedBlocks.length>0){const lastBlock=savedBlocks[savedBlocks.length-1];setCurrentBlock({id:Date.now(),startTime:lastBlock.endTime||lastBlock.startTime,endTime:'',tasks:''});}else{setCurrentBlock({id:Date.now(),startTime:recoveryShift.clockInTime||getActualTime(),endTime:'',tasks:''});}setCurrentTasks(['']);setShowRecoveryModal(false);setRecoveryShift(null);};const handleDiscardRecovery=()=>{// Show confirmation before discarding\nsetShowDiscardConfirm(true);};const confirmDiscardRecovery=async()=>{if(!recoveryShift)return;try{await shiftsAPI.discard(recoveryShift.id);setShowRecoveryModal(false);setShowDiscardConfirm(false);setRecoveryShift(null);}catch(err){console.error('Failed to discard shift:',err);alert('Failed to discard shift: '+err.message);}};const cancelDiscardRecovery=()=>{setShowDiscardConfirm(false);};// Clock out the recovered shift as-is (user forgot to clock out)\nconst handleClockOutRecovery=async()=>{if(!recoveryShift||!recoveryShift.timeBlocks||recoveryShift.timeBlocks.length===0){alert('Cannot clock out - no time blocks saved');return;}try{// Calculate total hours from saved blocks\nlet totalHours=0;recoveryShift.timeBlocks.forEach(block=>{const hrs=calculateBlockHours(block.startTime,block.endTime);if(hrs)totalHours+=parseFloat(hrs);});// Get clock in/out times from first/last blocks\nconst firstBlock=recoveryShift.timeBlocks[0];const lastBlock=recoveryShift.timeBlocks[recoveryShift.timeBlocks.length-1];const clockInTime=firstBlock.startTime;const clockOutTime=lastBlock.endTime;// Complete the shift (times already in UTC from server)\nconst completedShift=await shiftsAPI.clockOut(recoveryShift.id,clockInTime,clockOutTime,totalHours.toFixed(2));// Add to shifts list\nsetShifts([completedShift,...shifts]);// Show toast\nsetToast({message:'Shift clocked out successfully!',shift:completedShift});setTimeout(()=>setToast(null),5000);setShowRecoveryModal(false);setRecoveryShift(null);}catch(err){console.error('Failed to clock out:',err);alert('Failed to clock out: '+err.message);}};const formatTime=time=>{if(!time)return'--:--';let hour,minute;// Handle Date objects\nif(time instanceof Date){hour=time.getHours();minute=time.getMinutes();}// Handle ISO timestamp strings (e.g., \"2026-01-27T15:45:00.000Z\")\nelse if(typeof time==='string'&&(time.includes('T')||time.includes(' ')&&time.includes('-'))){const date=new Date(time);if(!isNaN(date.getTime())){hour=date.getHours();minute=date.getMinutes();}}// Handle object with hours/minutes (some DB drivers return this)\nelse if(typeof time==='object'&&time!==null&&!Array.isArray(time)){if('hours'in time||'minutes'in time){hour=time.hours||0;minute=time.minutes||0;}}// Handle \"HH:MM\" or \"HH:MM:SS\" format strings\nelse if(typeof time==='string'){const parts=time.split(':');if(parts.length>=2){hour=parseInt(parts[0]);minute=parseInt(parts[1]);}}// Validate we got valid numbers\nif(hour===undefined||minute===undefined||isNaN(hour)||isNaN(minute)){console.log('Unexpected time format:',time,typeof time);return'--:--';}const ampm=hour>=12?'PM':'AM';const formattedHour=hour%12||12;return\"\".concat(formattedHour,\":\").concat(String(minute).padStart(2,'0'),\" \").concat(ampm);};const formatDate=dateStr=>{if(!dateStr)return'Invalid Date';try{let date;// Handle Date objects, ISO strings, and YYYY-MM-DD strings\nif(dateStr instanceof Date){date=dateStr;}else if(typeof dateStr==='string'){// If it's just YYYY-MM-DD, add time to avoid timezone issues\nif(/^\\d{4}-\\d{2}-\\d{2}$/.test(dateStr)){date=new Date(dateStr+'T12:00:00');}else{date=new Date(dateStr);}}else{return'Invalid Date';}if(isNaN(date.getTime()))return'Invalid Date';return date.toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'});}catch(_unused){return'Invalid Date';}};const blockCount=completedBlocks.length+(currentBlock?1:0);const toggleShiftExpanded=shiftId=>{setExpandedShifts(prev=>{const newSet=new Set(prev);if(newSet.has(shiftId)){newSet.delete(shiftId);}else{newSet.add(shiftId);}return newSet;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[toast&&/*#__PURE__*/_jsxs(\"div\",{className:\"toast\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toast-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"toast-message\",children:toast.message}),/*#__PURE__*/_jsx(\"button\",{className:\"toast-close\",onClick:()=>setToast(null),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toast-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"toast-date\",children:formatDate(toast.shift.date)}),/*#__PURE__*/_jsxs(\"div\",{className:\"toast-times\",children:[formatTime(toast.shift.clockInTime),\" - \",formatTime(toast.shift.clockOutTime)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toast-hours\",children:[toast.shift.totalHours,\" hours\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toast-blocks\",children:[toast.shift.timeBlocks.filter(b=>!b.isBreak).slice(0,3).map((b,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"toast-block-item\",children:b.tasks},i)),toast.shift.timeBlocks.filter(b=>!b.isBreak).length>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"toast-more\",children:[\"+\",toast.shift.timeBlocks.filter(b=>!b.isBreak).length-3,\" more\"]})]})]})]}),showPreviewModal&&previewShiftData&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:cancelPreview,children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Review Your Shift\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:cancelPreview,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-summary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-date\",children:formatDate(previewShiftData.date)}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-times\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-label\",children:\"Clock In/Out:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[formatTime(previewShiftData.clockInTime),\" - \",formatTime(previewShiftData.clockOutTime)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-total\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-label\",children:\"Total Hours:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[previewShiftData.totalHours,\" hrs\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-blocks\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Time Blocks\"}),previewShiftData.timeBlocks.map((block,index)=>{// Count only work blocks for numbering\nconst workBlockNumber=previewShiftData.timeBlocks.slice(0,index+1).filter(b=>!b.isBreak).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"preview-block \".concat(block.isBreak?'break-block':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-block-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-block-num\",children:block.isBreak?'Break':\"Block \".concat(workBlockNumber)}),/*#__PURE__*/_jsxs(\"span\",{className:\"preview-block-time\",children:[formatTime(block.startTime),\" - \",formatTime(block.endTime)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"preview-block-hours\",children:[calculateBlockHours(block.startTime,block.endTime),\"h\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-block-tasks\",children:block.tasks.split(' • ').map((task,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"preview-task-item\",children:task},i))})]},index);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:cancelPreview,children:\"Go Back & Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:confirmSave,disabled:saving,children:saving?'Saving...':'Confirm & Save'})]})]})}),showGapModal&&gapData&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal gap-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Fill Time Gap\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gap-warning\",children:\"Your edit created a gap in the timeline. Please fill in what you worked on during this time.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gap-times\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gap Start\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:gapData.startTime,onChange:e=>setGapData(_objectSpread(_objectSpread({},gapData),{},{startTime:e.target.value}))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gap End\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:gapData.endTime,onChange:e=>setGapData(_objectSpread(_objectSpread({},gapData),{},{endTime:e.target.value}))})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gap-duration\",children:[\"Duration: \",/*#__PURE__*/_jsxs(\"strong\",{children:[calculateBlockHours(gapData.startTime,gapData.endTime),\" hrs\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"What did you work on?\"}),gapTasks.map((task,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"task-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:task,onChange:e=>{const newTasks=[...gapTasks];newTasks[index]=e.target.value;setGapTasks(newTasks);},placeholder:index===0?\"Enter task...\":\"Another task...\"}),gapTasks.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-remove-task\",onClick:()=>setGapTasks(gapTasks.filter((_,i)=>i!==index)),children:\"\\u2212\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-add-task\",onClick:()=>setGapTasks([...gapTasks,'']),children:\"+ Add Task\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:handleCancelGap,children:\"Cancel Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleFillGap,disabled:!gapTasks.some(t=>t.trim()),children:\"Fill Gap\"})]})]})}),showPasswordModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closePasswordModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal password-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Change Password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closePasswordModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:passwordSuccess?/*#__PURE__*/_jsx(\"div\",{className:\"password-success\",children:\"Password changed successfully!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[passwordError&&/*#__PURE__*/_jsx(\"div\",{className:\"password-error\",children:passwordError}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordData.current,onChange:e=>setPasswordData(_objectSpread(_objectSpread({},passwordData),{},{current:e.target.value})),placeholder:\"Enter current password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordData.new,onChange:e=>setPasswordData(_objectSpread(_objectSpread({},passwordData),{},{new:e.target.value})),placeholder:\"Enter new password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordData.confirm,onChange:e=>setPasswordData(_objectSpread(_objectSpread({},passwordData),{},{confirm:e.target.value})),placeholder:\"Confirm new password\"})]})]})}),!passwordSuccess&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:closePasswordModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleChangePassword,disabled:changingPassword,children:changingPassword?'Changing...':'Change Password'})]})]})}),showEmailModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeEmailModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal password-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Change Email\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeEmailModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:emailSuccess?/*#__PURE__*/_jsx(\"div\",{className:\"password-success\",children:\"Email changed successfully!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"password-error\",children:emailError}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:emailData.newEmail,onChange:e=>setEmailData(_objectSpread(_objectSpread({},emailData),{},{newEmail:e.target.value})),placeholder:\"Enter new email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:emailData.password,onChange:e=>setEmailData(_objectSpread(_objectSpread({},emailData),{},{password:e.target.value})),placeholder:\"Enter your password to confirm\"})]})]})}),!emailSuccess&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:closeEmailModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleChangeEmail,disabled:changingEmail,children:changingEmail?'Changing...':'Change Email'})]})]})}),resetPasswordUser&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeResetPasswordModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal password-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reset Password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeResetPasswordModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'16px',color:'#666'},children:[\"Reset password for \",/*#__PURE__*/_jsx(\"strong\",{children:resetPasswordUser.name}),\" (\",resetPasswordUser.email,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:resetPasswordValue,onChange:e=>setResetPasswordValue(e.target.value),placeholder:\"Enter new password (min 6 characters)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:closeResetPasswordModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleAdminResetPassword,disabled:resettingPassword,children:resettingPassword?'Resetting...':'Reset Password'})]})]})}),showRecoveryModal&&recoveryShift&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal recovery-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Resume Previous Shift?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:showDiscardConfirm?/*#__PURE__*/_jsxs(\"div\",{className:\"discard-confirm\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"discard-warning\",children:\"Are you sure you want to discard this shift?\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"discard-subtext\",children:[\"This will permanently delete all \",((_recoveryShift$timeBl=recoveryShift.timeBlocks)===null||_recoveryShift$timeBl===void 0?void 0:_recoveryShift$timeBl.length)||0,\" saved block(s).\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recovery-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"You have an unfinished shift from \",/*#__PURE__*/_jsx(\"strong\",{children:formatDate(recoveryShift.date)})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"recovery-blocks-count\",children:[((_recoveryShift$timeBl2=recoveryShift.timeBlocks)===null||_recoveryShift$timeBl2===void 0?void 0:_recoveryShift$timeBl2.length)||0,\" time block(s) saved\"]})]}),recoveryShift.timeBlocks&&recoveryShift.timeBlocks.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"preview-blocks\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Saved Blocks\"}),recoveryShift.timeBlocks.map((block,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"preview-block \".concat(block.isBreak?'break-block':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-block-header\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"preview-block-time\",children:[formatTime(block.startTime),\" - \",formatTime(block.endTime)]})}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-block-tasks\",children:block.tasks})]},index))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer recovery-footer\",children:showDiscardConfirm?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:cancelDiscardRecovery,children:\"Go Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:confirmDiscardRecovery,children:\"Yes, Discard\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:handleDiscardRecovery,children:\"Discard & Start Fresh\"}),recoveryShift.timeBlocks&&recoveryShift.timeBlocks.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:handleClockOutRecovery,children:\"Clock Out Now\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleResumeRecovery,children:\"Resume Shift\"})]})})]})}),autoSaveStatus!=='idle'&&/*#__PURE__*/_jsxs(\"div\",{className:\"auto-save-indicator \".concat(autoSaveStatus),children:[autoSaveStatus==='saving'&&'Saving...',autoSaveStatus==='saved'&&'Saved',autoSaveStatus==='error'&&'Save failed']}),/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-top\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Time Clock\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"test-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"test-row\",children:[/*#__PURE__*/_jsx(\"select\",{value:testBlocks,onChange:e=>setTestBlocks(Number(e.target.value)),children:[1,2,3,4,5,6,7,8].map(n=>/*#__PURE__*/_jsxs(\"option\",{value:n,children:[n,\" blocks\"]},n))}),/*#__PURE__*/_jsx(\"select\",{value:testBreaks,onChange:e=>setTestBreaks(Number(e.target.value)),children:[0,1,2,3,4].map(n=>/*#__PURE__*/_jsxs(\"option\",{value:n,children:[n,\" breaks\"]},n))}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-test\",onClick:generateTestShift,children:\"Generate\"}),(completedBlocks.length>0||currentBlock)&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-clear\",onClick:clearAll,children:\"Clear\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"test-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"now-offset-label\",children:\"Block +\"}),/*#__PURE__*/_jsx(\"select\",{value:nowOffsetHours,onChange:e=>setNowOffsetHours(Number(e.target.value)),children:[0,1,2,3,4,5].map(n=>/*#__PURE__*/_jsxs(\"option\",{value:n,children:[n,\"h\"]},n))}),/*#__PURE__*/_jsx(\"select\",{value:nowOffsetMins,onChange:e=>setNowOffsetMins(Number(e.target.value)),children:[0,15,30,45].map(n=>/*#__PURE__*/_jsxs(\"option\",{value:n,children:[n,\"m\"]},n))}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-random-task\",onClick:()=>{if(currentBlock){const randomTask=clientTasks[Math.floor(Math.random()*clientTasks.length)];// Add to first empty slot or append\nconst emptyIndex=currentTasks.findIndex(t=>!t.trim());if(emptyIndex>=0){const newTasks=[...currentTasks];newTasks[emptyIndex]=randomTask;setCurrentTasks(newTasks);}else{setCurrentTasks([...currentTasks,randomTask]);}}},disabled:!currentBlock,children:\"Random Task\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-dropdown-container\",ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"button\",{className:\"user-name-btn\",onClick:()=>setShowUserDropdown(!showUserDropdown),children:[user.name,/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow\",children:showUserDropdown?'▲':'▼'})]}),showUserDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:()=>{setShowPasswordModal(true);setShowUserDropdown(false);},children:\"Change Password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:()=>{setShowEmailModal(true);setShowUserDropdown(false);},children:\"Change Email\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item logout-item\",onClick:logout,children:\"Logout\"})]})]})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-nav\",children:[isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn admin-tab \".concat(activeTab==='admin'?'active':''),onClick:()=>setActiveTab('admin'),children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='today'?'active':''),onClick:()=>setActiveTab('today'),children:\"Today's Shift\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(activeTab==='history'?'active':''),onClick:()=>setActiveTab('history'),children:\"Shift History\"})]}),activeTab==='today'?/*#__PURE__*/_jsxs(\"main\",{className:\"main-grid\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"input-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Current Block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"date-picker\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:currentDate,onChange:e=>setCurrentDate(e.target.value)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-blocks-area\",children:[editingBlock&&/*#__PURE__*/_jsxs(\"div\",{className:\"time-block editing-block \".concat(editingBlock.isBreak?'break-block':'',\" \").concat(swipingBlockId===editingBlock.id?'swiping-out':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"block-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block-number\",children:\"Editing Block\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-controls\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-cancel-edit\",onClick:handleCancelEdit,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-save-edit\",onClick:handleSaveEdit,children:\"Save\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"block-times\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingBlock.startTime,onChange:e=>updateEditingBlock('startTime',e.target.value)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingBlock.endTime,onChange:e=>updateEditingBlock('endTime',e.target.value)}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn-now\",onClick:()=>updateEditingBlock('endTime',getEndTimeWithOffset(editingBlock.startTime)),children:[\"Now\",nowOffsetHours>0||nowOffsetMins>0?'+':'']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-increment-btns\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-increment\",onClick:()=>incrementEndTime(editingBlock,updateEditingBlock,15),children:\"+15m\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-increment\",onClick:()=>incrementEndTime(editingBlock,updateEditingBlock,60),children:\"+1hr\"})]})]})]}),!editingBlock.isBreak&&/*#__PURE__*/_jsxs(\"div\",{className:\"task-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tasks\"}),editingTasks.map((task,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"task-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:task,onChange:e=>{const newTasks=[...editingTasks];newTasks[index]=e.target.value;setEditingTasks(newTasks);},placeholder:index===0?\"What did you work on?\":\"Another task...\"}),editingTasks.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-remove-task\",onClick:()=>{const newTasks=editingTasks.filter((_,i)=>i!==index);setEditingTasks(newTasks);},children:\"\\u2212\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-add-task\",onClick:()=>setEditingTasks([...editingTasks,'']),children:\"+ Add Task\"})]})]}),currentBlock?/*#__PURE__*/_jsxs(\"div\",{className:\"time-block current-block \".concat(currentBlock.isBreak?'break-block':'',\" \").concat(swipingBlockId===currentBlock.id?'swiping-out':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"block-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"block-number\",children:[\"Block \",blockCount]}),calculateBlockHours(currentBlock.startTime,currentBlock.endTime)&&/*#__PURE__*/_jsxs(\"span\",{className:\"block-hours\",children:[calculateBlockHours(currentBlock.startTime,currentBlock.endTime),\" hrs\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"block-times\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-field\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Start\",completedBlocks.length>0]}),/*#__PURE__*/_jsx(\"div\",{className:\"time-input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:currentBlock.startTime,onChange:e=>!completedBlocks.length&&updateCurrentBlock('startTime',e.target.value),readOnly:completedBlocks.length>0,className:completedBlocks.length>0?'locked-input':''})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:currentBlock.endTime,onChange:e=>updateCurrentBlock('endTime',e.target.value)}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn-now\",onClick:()=>updateCurrentBlock('endTime',getEndTimeWithOffset(currentBlock.startTime)),children:[\"Now\",nowOffsetHours>0||nowOffsetMins>0?'+':'']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-increment-btns\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-increment\",onClick:()=>incrementEndTime(currentBlock,updateCurrentBlock,15),children:\"+15m\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-increment\",onClick:()=>incrementEndTime(currentBlock,updateCurrentBlock,60),children:\"+1hr\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tasks\"}),currentTasks.map((task,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"task-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:task,onChange:e=>{const newTasks=[...currentTasks];newTasks[index]=e.target.value;setCurrentTasks(newTasks);},placeholder:index===0?\"What did you work on?\":\"Another task...\"}),currentTasks.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-remove-task\",onClick:()=>{const newTasks=currentTasks.filter((_,i)=>i!==index);setCurrentTasks(newTasks);},children:\"\\u2212\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-add-task\",onClick:()=>setCurrentTasks([...currentTasks,'']),children:\"+ Add Task\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"block-actions\",children:[!currentBlock.isBreak&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-break\",onClick:handleBreak,children:\"+ Break\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-advance\",onClick:handleAdvanceBlock,disabled:!currentBlock.endTime||!currentTasks.some(t=>t.trim()),children:\"Next Block \\u2192\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Ready to start tracking\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-clock-in\",onClick:handleClockIn,children:\"Clock In\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shift-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-hours\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Hours:\"}),/*#__PURE__*/_jsx(\"strong\",{children:calculateTotalHours()})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-save\",onClick:previewShift,disabled:completedBlocks.length===0&&!currentBlock||saving,children:saving?'Saving...':'Clock Out'})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"completed-column\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Completed Blocks\"}),completedBlocks.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-completed\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Blocks will appear here as you complete them\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"completed-list\",children:completedBlocks.map((block,index)=>{// Count only work blocks for numbering\nconst workBlockNumber=completedBlocks.slice(0,index+1).filter(b=>!b.isBreak).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"completed-block \".concat(block.isBreak?'break-block':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"completed-block-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"completed-number\",children:block.isBreak?'Break':\"Block #\".concat(workBlockNumber)}),/*#__PURE__*/_jsxs(\"span\",{className:\"completed-hours\",children:[calculateBlockHours(block.startTime,block.endTime),\" hrs\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"completed-task\",children:block.tasks.split(' • ').map((task,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"task-line\",children:task},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"completed-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[formatTime(block.startTime),\" - \",formatTime(block.endTime)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"completed-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-edit \".concat(block.isBreak?'btn-extend-break':''),onClick:()=>handleEditBlock(block),disabled:editingBlock!==null,children:block.isBreak?'Extend Break':'Edit'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-delete\",onClick:()=>removeCompletedBlock(block.id),children:\"\\xD7\"})]})]})]},block.id);})})]})]}):activeTab==='history'?/*#__PURE__*//* Shift History Tab */_jsx(\"main\",{className:\"history-tab\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"shift-history-full\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shift History\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading shifts...\"}):shifts.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-text\",children:\"No shifts recorded yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:shifts.map(shift=>{const shiftId=shift._id||shift.id;const isExpanded=expandedShifts.has(shiftId);const isPending=shift.status==='pending';return/*#__PURE__*/_jsxs(\"div\",{className:\"history-item \".concat(isExpanded?'expanded':'',\" \").concat(isPending?'pending-shift':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-header-left\",onClick:()=>toggleShiftExpanded(shiftId),children:[/*#__PURE__*/_jsx(\"span\",{className:\"expand-icon\",children:isExpanded?'▼':'▶'}),isPending&&/*#__PURE__*/_jsx(\"span\",{className:\"status-badge pending\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"span\",{className:\"history-date\",children:formatDate(shift.date)}),/*#__PURE__*/_jsxs(\"span\",{className:\"history-times-inline\",children:[formatTime(shift.clockInTime),\" - \",isPending?'Active':formatTime(shift.clockOutTime)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-header-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"history-hours\",children:[isPending?'--':shift.totalHours,\" hrs\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-delete-shift\",onClick:e=>{e.stopPropagation();if(window.confirm('Delete this shift?')){shiftsAPI.delete(shiftId).then(()=>{setShifts(shifts.filter(s=>(s._id||s.id)!==shiftId));}).catch(err=>alert('Failed to delete: '+err.message));}},children:\"\\xD7\"})]})]}),isExpanded&&shift.timeBlocks&&shift.timeBlocks.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"history-tasks\",children:shift.timeBlocks.map((block,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-task \".concat(block.isBreak?'break-task':''),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"task-time\",children:[formatTime(block.startTime),\" - \",formatTime(block.endTime)]}),/*#__PURE__*/_jsx(\"span\",{className:\"task-text\",children:block.tasks.split(' • ').map((task,j)=>/*#__PURE__*/_jsx(\"span\",{className:\"task-line-inline\",children:task},j))}),calculateBlockHours(block.startTime,block.endTime)&&/*#__PURE__*/_jsxs(\"span\",{className:\"task-hours\",children:[calculateBlockHours(block.startTime,block.endTime),\"h\"]})]},i))})]},shiftId);})})]})}):/*#__PURE__*//* Admin Panel */_jsxs(\"main\",{className:\"admin-panel\",children:[adminToast&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-toast \".concat(adminToast.type),children:[adminToast.message,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAdminToast(null),children:\"\\xD7\"})]}),deleteConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>{setDeleteConfirm(null);setDeleteConfirmText('');},children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal delete-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Confirm Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>{setDeleteConfirm(null);setDeleteConfirmText('');},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"delete-warning\",children:[\"This action cannot be undone. Type \",/*#__PURE__*/_jsx(\"strong\",{children:\"DELETE\"}),\" to confirm.\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deleteConfirmText,onChange:e=>setDeleteConfirmText(e.target.value),placeholder:\"Type DELETE to confirm\",className:\"delete-confirm-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:()=>{setDeleteConfirm(null);setDeleteConfirmText('');},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-confirm\",disabled:deleteConfirmText!=='DELETE',onClick:()=>{if(deleteConfirm.type==='user')handleDeactivateUser(deleteConfirm.id);else if(deleteConfirm.type==='shift')handleDeleteShift(deleteConfirm.id);else if(deleteConfirm.type==='row')handleDeleteRow(deleteConfirm.table,deleteConfirm.id);},children:\"Delete\"})]})]})}),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setEditingUser(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal edit-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit User\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setEditingUser(null),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.name,onChange:e=>setEditingUser(_objectSpread(_objectSpread({},editingUser),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editingUser.email,onChange:e=>setEditingUser(_objectSpread(_objectSpread({},editingUser),{},{email:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.status,onChange:e=>setEditingUser(_objectSpread(_objectSpread({},editingUser),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.role,onChange:e=>setEditingUser(_objectSpread(_objectSpread({},editingUser),{},{role:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",style:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>{setResetPasswordUser(editingUser);setEditingUser(null);},style:{background:'#e67e22',color:'white'},children:\"Reset Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:()=>setEditingUser(null),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:()=>handleUpdateUser(editingUser.id,editingUser),children:\"Save Changes\"})]})]})]})}),creatingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setCreatingUser(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal edit-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create User\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setCreatingUser(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUserData.name,onChange:e=>setNewUserData(_objectSpread(_objectSpread({},newUserData),{},{name:e.target.value})),placeholder:\"Full name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:newUserData.email,onChange:e=>setNewUserData(_objectSpread(_objectSpread({},newUserData),{},{email:e.target.value})),placeholder:\"email@example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newUserData.password,onChange:e=>setNewUserData(_objectSpread(_objectSpread({},newUserData),{},{password:e.target.value})),placeholder:\"Min 6 characters\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUserData.role,onChange:e=>setNewUserData(_objectSpread(_objectSpread({},newUserData),{},{role:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUserData.status,onChange:e=>setNewUserData(_objectSpread(_objectSpread({},newUserData),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:()=>{setCreatingUser(false);setNewUserData({email:'',password:'',name:'',role:'user',status:'active'});},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleCreateUser,children:\"Create User\"})]})]})}),creatingShift&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setCreatingShift(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal edit-modal\",onClick:e=>e.stopPropagation(),style:{maxWidth:'700px',maxHeight:'90vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Shift\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setCreatingShift(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Employee *\"}),/*#__PURE__*/_jsxs(\"select\",{value:newShiftData.userId,onChange:e=>setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{userId:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select User\"}),adminUsers.filter(u=>u.status==='active').map(u=>/*#__PURE__*/_jsxs(\"option\",{value:u.id,children:[u.name,\" (\",u.email,\")\"]},u.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newShiftData.date,onChange:e=>setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{date:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Clock In *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:newShiftData.clockInTime,onChange:e=>setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{clockInTime:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Clock Out\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:newShiftData.clockOutTime,onChange:e=>setNewShiftData(_objectSpread(_objectSpread({},newShiftData),{},{clockOutTime:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',borderTop:'1px solid #eee',paddingTop:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,color:'#2c3e50'},children:\"Time Blocks\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addNewShiftBlock,style:{background:'#9b59b6',color:'white',border:'none',padding:'6px 12px',borderRadius:'6px',cursor:'pointer',fontSize:'0.85rem'},children:\"+ Add Block\"})]}),newShiftData.timeBlocks.map((block,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{background:block.isBreak?'#fef9e7':'#f8f9fa',borderRadius:'8px',padding:'12px',marginBottom:'8px',borderLeft:\"3px solid \".concat(block.isBreak?'#f39c12':'#9b59b6')},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'8px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'600',fontSize:'0.9rem'},children:[\"Block \",idx+1]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'4px',fontSize:'0.85rem',color:'#666'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:block.isBreak,onChange:e=>updateNewShiftBlock(block.id,'isBreak',e.target.checked)}),\"Break\"]}),newShiftData.timeBlocks.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeNewShiftBlock(block.id),style:{background:'#e74c3c',color:'white',border:'none',padding:'2px 8px',borderRadius:'4px',cursor:'pointer',fontSize:'0.8rem'},children:\"Remove\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'8px',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:block.startTime,onChange:e=>updateNewShiftBlock(block.id,'startTime',e.target.value),placeholder:\"Start Time\",style:{padding:'8px',borderRadius:'6px',border:'1px solid #ddd'}}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:block.endTime,onChange:e=>updateNewShiftBlock(block.id,'endTime',e.target.value),placeholder:\"End Time\",style:{padding:'8px',borderRadius:'6px',border:'1px solid #ddd'}})]}),!block.isBreak&&/*#__PURE__*/_jsx(\"textarea\",{value:block.tasks,onChange:e=>updateNewShiftBlock(block.id,'tasks',e.target.value),placeholder:\"Tasks performed during this time block...\",style:{width:'100%',padding:'8px',borderRadius:'6px',border:'1px solid #ddd',resize:'vertical',minHeight:'60px',fontSize:'0.9rem'}})]},block.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:()=>{setCreatingShift(false);setNewShiftData({userId:'',date:new Date().toISOString().split('T')[0],clockInTime:'08:00',clockOutTime:'17:00',timeBlocks:[{id:Date.now(),startTime:'08:00',endTime:'17:00',tasks:'',isBreak:false}]});},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:handleCreateShift,disabled:savingShift,children:savingShift?'Creating...':'Create Shift'})]})]})}),editingShift&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setEditingShift(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal edit-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Shift\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setEditingShift(null),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:((_editingShift$date=editingShift.date)===null||_editingShift$date===void 0?void 0:_editingShift$date.split('T')[0])||editingShift.date,onChange:e=>setEditingShift(_objectSpread(_objectSpread({},editingShift),{},{date:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Clock In\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_editingShift$clock_i=editingShift.clock_in_time)===null||_editingShift$clock_i===void 0?void 0:_editingShift$clock_i.substring(0,5))||'',onChange:e=>setEditingShift(_objectSpread(_objectSpread({},editingShift),{},{clockInTime:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Clock Out\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_editingShift$clock_o=editingShift.clock_out_time)===null||_editingShift$clock_o===void 0?void 0:_editingShift$clock_o.substring(0,5))||'',onChange:e=>setEditingShift(_objectSpread(_objectSpread({},editingShift),{},{clockOutTime:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total Hours\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editingShift.total_hours||'',onChange:e=>setEditingShift(_objectSpread(_objectSpread({},editingShift),{},{totalHours:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:()=>setEditingShift(null),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:()=>handleUpdateShift(editingShift.id,editingShift),children:\"Save Changes\"})]})]})}),editingRow&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setEditingRow(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-modal edit-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Row\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setEditingRow(null),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:(_tableData$schema=tableData.schema)===null||_tableData$schema===void 0?void 0:_tableData$schema.filter(col=>!col.isProtected&&!col.isRedacted).map(col=>{var _editingRow$col$colum;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:col.column_name}),/*#__PURE__*/_jsx(\"input\",{type:col.data_type.includes('int')?'number':'text',value:(_editingRow$col$colum=editingRow[col.column_name])!==null&&_editingRow$col$colum!==void 0?_editingRow$col$colum:'',onChange:e=>setEditingRow(_objectSpread(_objectSpread({},editingRow),{},{[col.column_name]:e.target.value}))})]},col.column_name);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel-modal\",onClick:()=>setEditingRow(null),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:()=>handleUpdateRow(selectedTable,editingRow.id,editingRow),children:\"Save Changes\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-sub-nav\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-sub-tab \".concat(adminSubTab==='dashboard'?'active':''),onClick:()=>setAdminSubTab('dashboard'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-sub-tab \".concat(adminSubTab==='users'?'active':''),onClick:()=>setAdminSubTab('users'),children:\"Users\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-sub-tab \".concat(adminSubTab==='shifts'?'active':''),onClick:()=>setAdminSubTab('shifts'),children:\"Shifts\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-sub-tab \".concat(adminSubTab==='reports'?'active':''),onClick:()=>setAdminSubTab('reports'),children:\"Reports\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-sub-tab \".concat(adminSubTab==='database'?'active':''),onClick:()=>setAdminSubTab('database'),children:\"Data Browser\"})]}),adminSubTab==='dashboard'&&/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:adminLoading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading dashboard...\"}):dashboardData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:dashboardData.totalUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:dashboardData.activeUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Active This Week\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:((_dashboardData$hoursT=dashboardData.hoursToday)===null||_dashboardData$hoursT===void 0?void 0:_dashboardData$hoursT.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Hours Today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:((_dashboardData$hoursT2=dashboardData.hoursThisWeek)===null||_dashboardData$hoursT2===void 0?void 0:_dashboardData$hoursT2.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Hours This Week\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:((_dashboardData$hoursT3=dashboardData.hoursThisMonth)===null||_dashboardData$hoursT3===void 0?void 0:_dashboardData$hoursT3.toFixed(1))||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Hours This Month\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-sections\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Top Employees This Week\"}),/*#__PURE__*/_jsx(\"div\",{className:\"top-employees-list\",children:(_dashboardData$topEmp=dashboardData.topEmployees)===null||_dashboardData$topEmp===void 0?void 0:_dashboardData$topEmp.slice(0,5).map((emp,i)=>{var _emp$hours;return/*#__PURE__*/_jsxs(\"div\",{className:\"top-employee\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"rank\",children:[\"#\",i+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:emp.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"hours\",children:[((_emp$hours=emp.hours)===null||_emp$hours===void 0?void 0:_emp$hours.toFixed(1))||0,\" hrs\"]})]},emp.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Activity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-list\",children:[(_dashboardData$recent=dashboardData.recentActivity)===null||_dashboardData$recent===void 0?void 0:_dashboardData$recent.slice(0,10).map((activity,i)=>{const targetName=activity.target_name||'Unknown';const adminName=activity.admin_name||'Admin';const formatAction=()=>{switch(activity.action){case'user_created':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" added new employee \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});case'user_updated':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" updated \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});case'user_deactivated':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" deactivated \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});case'user_activated':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" reactivated \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});case'user_password_reset':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" reset password for \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});case'shift_created':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" created shift for \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});case'shift_updated':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" edited \",/*#__PURE__*/_jsxs(\"strong\",{children:[targetName,\"'s\"]}),\" shift\"]});case'shift_deleted':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" deleted \",/*#__PURE__*/_jsxs(\"strong\",{children:[targetName,\"'s\"]}),\" shift\"]});default:return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:adminName}),\" \",activity.action.replace(/_/g,' '),\" \",/*#__PURE__*/_jsx(\"strong\",{children:targetName})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"activity-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"activity-description\",children:formatAction()}),/*#__PURE__*/_jsx(\"span\",{className:\"activity-time\",children:new Date(activity.created_at).toLocaleString()})]},i);}),(!dashboardData.recentActivity||dashboardData.recentActivity.length===0)&&/*#__PURE__*/_jsx(\"p\",{className:\"empty-text\",children:\"No recent admin activity\"})]})]})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm-modal\",onClick:loadDashboard,children:\"Load Dashboard\"})}),adminSubTab==='users'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-header-bar\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-create\",onClick:()=>setCreatingUser(true),children:\"+ Create User\"})}),adminUsersLoading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading users...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:adminUsers.map(u=>/*#__PURE__*/_jsxs(\"tr\",{className:u.status==='inactive'?'inactive-row':'',children:[/*#__PURE__*/_jsx(\"td\",{children:u.id}),/*#__PURE__*/_jsx(\"td\",{children:u.name}),/*#__PURE__*/_jsx(\"td\",{children:u.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"role-badge \".concat(u.role),children:u.role})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(u.status),children:u.status})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(u.created_at).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"action-cell\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-edit-small\",onClick:()=>setEditingUser(_objectSpread({},u)),children:\"Edit\"}),u.id!==user.id&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-small\",onClick:()=>setDeleteConfirm({type:'user',id:u.id}),children:\"Deactivate\"})]})]},u.id))})]})}),adminUsersPagination.totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:adminUsersPagination.page<=1,onClick:()=>loadAdminUsers(adminUsersPagination.page-1),children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",adminUsersPagination.page,\" of \",adminUsersPagination.totalPages]}),/*#__PURE__*/_jsx(\"button\",{disabled:adminUsersPagination.page>=adminUsersPagination.totalPages,onClick:()=>loadAdminUsers(adminUsersPagination.page+1),children:\"Next\"})]})]})]}),adminSubTab==='shifts'&&(viewingShift?/*#__PURE__*//* Full Page Shift Details */_jsxs(\"div\",{className:\"shift-detail-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"breadcrumb-nav\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"breadcrumb-link\",onClick:()=>setViewingShift(null),children:\"\\u2190 Back to Shifts\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"/\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"breadcrumb-current\",children:[\"Shift #\",viewingShift.id]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shift-detail-two-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shift-detail-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shift-detail-card-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shift Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"shift-detail-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-edit-small\",onClick:()=>{setEditingShift(_objectSpread({},viewingShift));},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-small\",onClick:()=>setDeleteConfirm({type:'shift',id:viewingShift.id}),children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shift-details-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Employee\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:viewingShift.user_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:viewingShift.user_email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Date\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatDate(viewingShift.date)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Clock In\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatTime(viewingShift.clock_in_time)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Clock Out\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatTime(viewingShift.clock_out_time)||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Total Hours\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value highlight\",children:[viewingShift.total_hours||'0',\" hrs\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(viewingShift.status),children:viewingShift.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Shift ID\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[\"#\",viewingShift.id]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-blocks-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Time Blocks (\",((_viewingShift$timeBlo=viewingShift.timeBlocks)===null||_viewingShift$timeBlo===void 0?void 0:_viewingShift$timeBlo.length)||0,\")\"]}),viewingShift.timeBlocks&&viewingShift.timeBlocks.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"time-blocks-stack\",children:viewingShift.timeBlocks.map((block,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"time-block-row \".concat(block.is_break?'break':''),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"block-time-col\",children:[formatTime(block.start_time),\" \\u2192 \",formatTime(block.end_time)||'...']}),block.is_break?/*#__PURE__*/_jsx(\"span\",{className:\"block-task-col break-text\",children:\"Break\"}):/*#__PURE__*/_jsx(\"span\",{className:\"block-task-col\",children:block.tasks||'-'})]},block.id||idx))}):/*#__PURE__*/_jsx(\"p\",{className:\"no-time-blocks\",children:\"No time blocks recorded for this shift\"})]})]})]}):/*#__PURE__*//* Shifts List */_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-bar\",style:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"Start Date\",value:adminShiftsFilters.startDate,onChange:e=>setAdminShiftsFilters(_objectSpread(_objectSpread({},adminShiftsFilters),{},{startDate:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"End Date\",value:adminShiftsFilters.endDate,onChange:e=>setAdminShiftsFilters(_objectSpread(_objectSpread({},adminShiftsFilters),{},{endDate:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-filter\",onClick:()=>loadAdminShifts(1),children:\"Apply Filters\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-clear-filter\",onClick:()=>{setAdminShiftsFilters({userId:'',startDate:'',endDate:''});loadAdminShifts(1);},children:\"Clear\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-create\",onClick:()=>{if(adminUsers.length===0)loadAdminUsers();setCreatingShift(true);},children:\"+ Create Shift\"})]}),adminLoading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading shifts...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Clock In\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Clock Out\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hours\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:adminShifts.map(s=>/*#__PURE__*/_jsxs(\"tr\",{className:\"clickable-row\",onClick:()=>viewShiftDetails(s.id),children:[/*#__PURE__*/_jsx(\"td\",{children:s.id}),/*#__PURE__*/_jsx(\"td\",{children:s.userName||s.user_name}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(s.date)}),/*#__PURE__*/_jsx(\"td\",{children:formatTime(s.clock_in_time)}),/*#__PURE__*/_jsx(\"td\",{children:formatTime(s.clock_out_time)}),/*#__PURE__*/_jsx(\"td\",{children:s.total_hours}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(s.status),children:s.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"action-cell\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-edit-small\",onClick:()=>setEditingShift(_objectSpread({},s)),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-small\",onClick:()=>setDeleteConfirm({type:'shift',id:s.id}),children:\"Delete\"})]})]},s.id))})]})}),adminShiftsPagination.totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:adminShiftsPagination.page<=1,onClick:()=>loadAdminShifts(adminShiftsPagination.page-1),children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",adminShiftsPagination.page,\" of \",adminShiftsPagination.totalPages]}),/*#__PURE__*/_jsx(\"button\",{disabled:adminShiftsPagination.page>=adminShiftsPagination.totalPages,onClick:()=>loadAdminShifts(adminShiftsPagination.page+1),children:\"Next\"})]})]})]})),adminSubTab==='reports'&&/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reports-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Export Data\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"Start Date\",value:adminShiftsFilters.startDate,onChange:e=>setAdminShiftsFilters(_objectSpread(_objectSpread({},adminShiftsFilters),{},{startDate:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"End Date\",value:adminShiftsFilters.endDate,onChange:e=>setAdminShiftsFilters(_objectSpread(_objectSpread({},adminShiftsFilters),{},{endDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"export-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-export\",onClick:()=>handleExport('shifts'),children:\"Export Shifts (CSV)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-export\",onClick:()=>handleExport('users'),children:\"Export Users (CSV)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-export\",onClick:()=>handleExport('hours'),children:\"Export Hours Summary (CSV)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-export\",onClick:()=>handleExport('timeblocks'),children:\"Export Time Blocks (CSV)\"})]})]})}),adminSubTab==='database'&&/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"db-browser\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"db-sidebar\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Tables\"}),tableLoading&&!dbTables.length?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading tables...\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"table-list\",children:dbTables.map(t=>/*#__PURE__*/_jsxs(\"li\",{className:\"table-item \".concat(selectedTable===t.name?'selected':'',\" \").concat(!t.writable?'readonly':''),onClick:()=>loadTableData(t.name),children:[/*#__PURE__*/_jsx(\"span\",{className:\"table-name\",children:t.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"table-count\",children:[t.rowCount,\" rows\"]}),!t.writable&&/*#__PURE__*/_jsx(\"span\",{className:\"readonly-badge\",children:\"Read-only\"})]},t.name))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"db-content\",children:!selectedTable?/*#__PURE__*/_jsx(\"p\",{className:\"empty-text\",children:\"Select a table to browse data\"}):tableLoading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading data...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[selectedTable,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"table-info\",children:[\"(\",((_tableData$pagination=tableData.pagination)===null||_tableData$pagination===void 0?void 0:_tableData$pagination.total)||0,\" rows)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table db-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[(_tableData$schema2=tableData.schema)===null||_tableData$schema2===void 0?void 0:_tableData$schema2.map(col=>/*#__PURE__*/_jsxs(\"th\",{className:col.isRedacted?'redacted':'',children:[col.column_name,col.isProtected&&/*#__PURE__*/_jsx(\"span\",{className:\"protected-icon\",title:\"Protected\",children:\"*\"})]},col.column_name)),((_tableData$config=tableData.config)===null||_tableData$config===void 0?void 0:_tableData$config.writable)&&/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_tableData$rows=tableData.rows)===null||_tableData$rows===void 0?void 0:_tableData$rows.map(row=>{var _tableData$schema3,_tableData$config2,_tableData$config3;return/*#__PURE__*/_jsxs(\"tr\",{children:[(_tableData$schema3=tableData.schema)===null||_tableData$schema3===void 0?void 0:_tableData$schema3.map(col=>{var _row$col$column_name;return/*#__PURE__*/_jsx(\"td\",{className:col.isRedacted?'redacted-cell':'',children:col.isRedacted?'[REDACTED]':typeof row[col.column_name]==='object'?JSON.stringify(row[col.column_name]):String((_row$col$column_name=row[col.column_name])!==null&&_row$col$column_name!==void 0?_row$col$column_name:'')},col.column_name);}),((_tableData$config2=tableData.config)===null||_tableData$config2===void 0?void 0:_tableData$config2.writable)&&/*#__PURE__*/_jsxs(\"td\",{className:\"action-cell\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-edit-small\",onClick:()=>setEditingRow(_objectSpread({},row)),children:\"Edit\"}),((_tableData$config3=tableData.config)===null||_tableData$config3===void 0?void 0:_tableData$config3.deleteAllowed)&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete-small\",onClick:()=>setDeleteConfirm({type:'row',table:selectedTable,id:row.id}),children:\"Delete\"})]})]},row.id);})})]})}),((_tableData$pagination2=tableData.pagination)===null||_tableData$pagination2===void 0?void 0:_tableData$pagination2.totalPages)>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:tableData.pagination.page<=1,onClick:()=>loadTableData(selectedTable,tableData.pagination.page-1),children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",tableData.pagination.page,\" of \",tableData.pagination.totalPages]}),/*#__PURE__*/_jsx(\"button\",{disabled:tableData.pagination.page>=tableData.pagination.totalPages,onClick:()=>loadTableData(selectedTable,tableData.pagination.page+1),children:\"Next\"})]})]})})]})})]})]});}function AppContent(){const{isAuthenticated,loading}=useAuth();const[showRegister,setShowRegister]=useState(()=>{return window.location.pathname==='/register';});const handleSwitchToLogin=()=>{setShowRegister(false);window.history.pushState({},'','/');};const handleSwitchToRegister=()=>{setShowRegister(true);window.history.pushState({},'','/register');};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Time Clock\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});}if(!isAuthenticated){return showRegister?/*#__PURE__*/_jsx(Register,{onSwitchToLogin:handleSwitchToLogin}):/*#__PURE__*/_jsx(Login,{onSwitchToRegister:handleSwitchToRegister});}return/*#__PURE__*/_jsx(TimeClock,{});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","AuthProvider","useAuth","shiftsAPI","authAPI","adminAPI","localTimeToUTC","Login","Register","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ADMIN_EMAIL","TimeClock","_recoveryShift$timeBl","_recoveryShift$timeBl2","_editingShift$date","_editingShift$clock_i","_editingShift$clock_o","_tableData$schema","_dashboardData$hoursT","_dashboardData$hoursT2","_dashboardData$hoursT3","_dashboardData$topEmp","_dashboardData$recent","_viewingShift$timeBlo","_tableData$pagination","_tableData$schema2","_tableData$config","_tableData$rows","_tableData$pagination2","user","logout","completedBlocks","setCompletedBlocks","currentBlock","setCurrentBlock","currentTasks","setCurrentTasks","editingBlock","setEditingBlock","editingTasks","setEditingTasks","editingOriginalIndex","setEditingOriginalIndex","swipingBlockId","setSwipingBlockId","testBlocks","setTestBlocks","testBreaks","setTestBreaks","nowOffsetHours","setNowOffsetHours","nowOffsetMins","setNowOffsetMins","activeTab","setActiveTab","adminShifts","setAdminShifts","adminLoading","setAdminLoading","isAdmin","email","role","adminSubTab","setAdminSubTab","dashboardData","setDashboardData","adminUsers","setAdminUsers","adminUsersLoading","setAdminUsersLoading","adminUsersPagination","setAdminUsersPagination","page","limit","total","adminShiftsPagination","setAdminShiftsPagination","adminShiftsFilters","setAdminShiftsFilters","userId","startDate","endDate","editingShift","setEditingShift","viewingShift","setViewingShift","viewingShiftLoading","setViewingShiftLoading","creatingShift","setCreatingShift","newShiftData","setNewShiftData","date","Date","toISOString","split","clockInTime","clockOutTime","timeBlocks","id","now","startTime","endTime","tasks","isBreak","savingShift","setSavingShift","editingUser","setEditingUser","creatingUser","setCreatingUser","newUserData","setNewUserData","password","name","status","dbTables","setDbTables","selectedTable","setSelectedTable","tableData","setTableData","rows","pagination","schema","config","tableLoading","setTableLoading","editingRow","setEditingRow","deleteConfirm","setDeleteConfirm","deleteConfirmText","setDeleteConfirmText","adminToast","setAdminToast","currentDate","setCurrentDate","year","getFullYear","month","String","getMonth","padStart","day","getDate","concat","shifts","setShifts","loading","setLoading","saving","setSaving","toast","setToast","expandedShifts","setExpandedShifts","Set","showPreviewModal","setShowPreviewModal","previewShiftData","setPreviewShiftData","showGapModal","setShowGapModal","gapData","setGapData","gapTasks","setGapTasks","blocksBeforeEdit","setBlocksBeforeEdit","showUserDropdown","setShowUserDropdown","dropdownRef","showPasswordModal","setShowPasswordModal","passwordData","setPasswordData","current","new","confirm","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","changingPassword","setChangingPassword","showEmailModal","setShowEmailModal","emailData","setEmailData","newEmail","emailError","setEmailError","emailSuccess","setEmailSuccess","changingEmail","setChangingEmail","resetPasswordUser","setResetPasswordUser","resetPasswordValue","setResetPasswordValue","resettingPassword","setResettingPassword","pendingShiftId","setPendingShiftId","autoSaveStatus","setAutoSaveStatus","showRecoveryModal","setShowRecoveryModal","recoveryShift","setRecoveryShift","showDiscardConfirm","setShowDiscardConfirm","loadShifts","data","getAll","err","console","error","checkPendingShift","pending","getPending","loadDashboard","length","loadAdminUsers","loadAdminShifts","loadDbTables","getDashboard","type","message","arguments","undefined","getUsers","users","params","_objectSpread","Object","keys","forEach","k","getShifts","map","s","userName","user_name","userEmail","user_email","getTables","tables","loadTableData","tableName","getTableData","handleUpdateUser","updates","updateUser","handleCreateUser","createUser","handleDeactivateUser","deactivateUser","handleCreateShift","totalMinutes","block","startH","startM","Number","endH","endM","mins","totalHours","toFixed","createShift","parseInt","parseFloat","b","addNewShiftBlock","lastBlock","newStartTime","updateNewShiftBlock","blockId","field","value","removeNewShiftBlock","filter","viewShiftDetails","shiftId","shift","getShift","handleUpdateShift","updateShift","handleDeleteShift","deleteShift","handleUpdateRow","rowId","updateTableRow","handleDeleteRow","deleteTableRow","handleExport","downloadExport","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","getActualTime","hours","getHours","minutes","getMinutes","getStartTime","getEndTimeWithOffset","h","m","baseTime","setHours","setMinutes","incrementEndTime","updateFn","newTime","addMinutesToTime","time","minutesToAdd","calculateBlockHours","normalizeTime","t","slice","join","start","end","diffMs","diffHours","handleClockIn","clockIn","newBlock","alert","joinTasks","tasksArray","trim","handleAdvanceBlock","completedBlock","setTimeout","savedBlock","addBlock","serverId","handleBreak","breakStartTime","breakEndTime","joinedTasks","updatedBlocks","workBlock","breakBlock","savedBreak","prev","updateCurrentBlock","updateEditingBlock","handleEditBlock","originalIndex","findIndex","timeToMinutes","processBlocksAfterEdit","blocks","insertIndex","splice","editedEndMinutes","nextBlock","nextStartMinutes","i","blockStartMinutes","blockEndMinutes","gap","gapIndex","handleSaveEdit","originalBlocks","Math","min","result","pendingBlocks","handleFillGap","gapBlock","gapEndMinutes","nextIndex","handleCancelGap","handleCancelEdit","removeCompletedBlock","handleChangePassword","changePassword","closePasswordModal","handleChangeEmail","emailRegex","test","changeEmail","token","localStorage","setItem","window","location","reload","closeEmailModal","handleAdminResetPassword","resetUserPassword","closeResetPasswordModal","clientTasks","generateTestShift","currentHour","currentMinute","breakCount","totalBlocks","breakInterval","floor","duration","random","push","clearAll","calculateTotalHours","Boolean","hrs","previewShift","allBlocks","currentJoinedTasks","validBlocks","shiftData","confirmSave","completedShift","alreadySaved","some","clockOut","create","cancelPreview","handleResumeRecovery","savedBlocks","handleDiscardRecovery","confirmDiscardRecovery","discard","cancelDiscardRecovery","handleClockOutRecovery","firstBlock","formatTime","hour","minute","includes","isNaN","getTime","Array","isArray","parts","log","ampm","formattedHour","formatDate","dateStr","toLocaleDateString","weekday","_unused","blockCount","toggleShiftExpanded","newSet","has","delete","add","className","children","onClick","e","stopPropagation","index","workBlockNumber","task","disabled","onChange","newTasks","placeholder","_","style","marginBottom","color","n","randomTask","emptyIndex","ref","readOnly","_id","isExpanded","isPending","then","catch","j","table","justifyContent","background","display","maxWidth","maxHeight","overflow","u","gridTemplateColumns","marginTop","borderTop","paddingTop","alignItems","margin","border","padding","borderRadius","cursor","fontSize","idx","borderLeft","fontWeight","checked","width","resize","minHeight","clock_in_time","substring","clock_out_time","step","total_hours","col","isProtected","isRedacted","_editingRow$col$colum","column_name","data_type","totalUsers","activeUsers","hoursToday","hoursThisWeek","hoursThisMonth","topEmployees","emp","_emp$hours","recentActivity","activity","targetName","target_name","adminName","admin_name","formatAction","action","replace","created_at","toLocaleString","totalPages","is_break","start_time","end_time","writable","rowCount","title","row","_tableData$schema3","_tableData$config2","_tableData$config3","_row$col$column_name","JSON","stringify","deleteAllowed","AppContent","isAuthenticated","showRegister","setShowRegister","pathname","handleSwitchToLogin","history","pushState","handleSwitchToRegister","onSwitchToLogin","onSwitchToRegister","App"],"sources":["/Users/trevo/Projects/Full Scope Estimating/timeClock/timeClock_v1/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { AuthProvider, useAuth } from './context/AuthContext';\nimport { shiftsAPI, authAPI, adminAPI, localTimeToUTC } from './services/api';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport './App.css';\n\n// Hardcoded admin email\nconst ADMIN_EMAIL = 'tyler@fullscopeestimating.com';\n\nfunction TimeClock() {\n  const { user, logout } = useAuth();\n  const [completedBlocks, setCompletedBlocks] = useState([]);\n  const [currentBlock, setCurrentBlock] = useState(null);\n  const [currentTasks, setCurrentTasks] = useState(['']); // Array of task inputs for current block\n  const [editingBlock, setEditingBlock] = useState(null); // For \"going back in time\"\n  const [editingTasks, setEditingTasks] = useState(['']); // Array of task inputs for editing block\n  const [editingOriginalIndex, setEditingOriginalIndex] = useState(null); // Track original position\n  const [swipingBlockId, setSwipingBlockId] = useState(null);\n  const [testBlocks, setTestBlocks] = useState(5);\n  const [testBreaks, setTestBreaks] = useState(2);\n  const [nowOffsetHours, setNowOffsetHours] = useState(0);\n  const [nowOffsetMins, setNowOffsetMins] = useState(0);\n  const [activeTab, setActiveTab] = useState('today'); // 'today', 'history', or 'admin'\n  const [adminShifts, setAdminShifts] = useState([]);\n  const [adminLoading, setAdminLoading] = useState(false);\n  const isAdmin = user?.email === ADMIN_EMAIL || user?.role === 'admin';\n\n  // Admin Panel State\n  const [adminSubTab, setAdminSubTab] = useState('dashboard');\n  const [dashboardData, setDashboardData] = useState(null);\n  const [adminUsers, setAdminUsers] = useState([]);\n  const [adminUsersLoading, setAdminUsersLoading] = useState(false);\n  const [adminUsersPagination, setAdminUsersPagination] = useState({ page: 1, limit: 25, total: 0 });\n  const [adminShiftsPagination, setAdminShiftsPagination] = useState({ page: 1, limit: 25, total: 0 });\n  const [adminShiftsFilters, setAdminShiftsFilters] = useState({ userId: '', startDate: '', endDate: '' });\n  const [editingShift, setEditingShift] = useState(null);\n  const [viewingShift, setViewingShift] = useState(null);\n  const [viewingShiftLoading, setViewingShiftLoading] = useState(false);\n  const [creatingShift, setCreatingShift] = useState(false);\n  const [newShiftData, setNewShiftData] = useState({\n    userId: '',\n    date: new Date().toISOString().split('T')[0],\n    clockInTime: '08:00',\n    clockOutTime: '17:00',\n    timeBlocks: [{ id: Date.now(), startTime: '08:00', endTime: '17:00', tasks: '', isBreak: false }]\n  });\n  const [savingShift, setSavingShift] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [creatingUser, setCreatingUser] = useState(false);\n  const [newUserData, setNewUserData] = useState({ email: '', password: '', name: '', role: 'user', status: 'active' });\n  const [dbTables, setDbTables] = useState([]);\n  const [selectedTable, setSelectedTable] = useState(null);\n  const [tableData, setTableData] = useState({ rows: [], pagination: {}, schema: [], config: {} });\n  const [tableLoading, setTableLoading] = useState(false);\n  const [editingRow, setEditingRow] = useState(null);\n  const [deleteConfirm, setDeleteConfirm] = useState(null);\n  const [deleteConfirmText, setDeleteConfirmText] = useState('');\n  const [adminToast, setAdminToast] = useState(null);\n  const [currentDate, setCurrentDate] = useState(() => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  });\n  const [shifts, setShifts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [toast, setToast] = useState(null); // { shift, message }\n  const [expandedShifts, setExpandedShifts] = useState(new Set()); // Track expanded shift IDs\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  const [previewShiftData, setPreviewShiftData] = useState(null);\n  const [showGapModal, setShowGapModal] = useState(false);\n  const [gapData, setGapData] = useState(null); // { startTime, endTime, pendingBlocks, gapIndex }\n  const [gapTasks, setGapTasks] = useState(['']);\n  const [blocksBeforeEdit, setBlocksBeforeEdit] = useState(null); // For restoring on gap cancel\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\n  const dropdownRef = useRef(null);\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [passwordData, setPasswordData] = useState({ current: '', new: '', confirm: '' });\n  const [passwordError, setPasswordError] = useState('');\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\n  const [changingPassword, setChangingPassword] = useState(false);\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [emailData, setEmailData] = useState({ newEmail: '', password: '' });\n  const [emailError, setEmailError] = useState('');\n  const [emailSuccess, setEmailSuccess] = useState(false);\n  const [changingEmail, setChangingEmail] = useState(false);\n  const [resetPasswordUser, setResetPasswordUser] = useState(null);\n  const [resetPasswordValue, setResetPasswordValue] = useState('');\n  const [resettingPassword, setResettingPassword] = useState(false);\n  // Auto-save state\n  const [pendingShiftId, setPendingShiftId] = useState(null);\n  const [autoSaveStatus, setAutoSaveStatus] = useState('idle'); // 'idle', 'saving', 'saved', 'error'\n  const [showRecoveryModal, setShowRecoveryModal] = useState(false);\n  const [recoveryShift, setRecoveryShift] = useState(null);\n  const [showDiscardConfirm, setShowDiscardConfirm] = useState(false);\n\n  useEffect(() => {\n    const loadShifts = async () => {\n      try {\n        const data = await shiftsAPI.getAll();\n        setShifts(data);\n      } catch (err) {\n        console.error('Failed to load shifts:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadShifts();\n  }, []);\n\n  // Set default tab to admin for admin users\n  useEffect(() => {\n    if (isAdmin) {\n      setActiveTab('admin');\n    }\n  }, [isAdmin]);\n\n  // Check for pending shift on load (for recovery)\n  useEffect(() => {\n    const checkPendingShift = async () => {\n      try {\n        const pending = await shiftsAPI.getPending();\n        if (pending && pending.id) {\n          setRecoveryShift(pending);\n          setShowRecoveryModal(true);\n        }\n      } catch (err) {\n        console.error('Failed to check pending shift:', err);\n      }\n    };\n    checkPendingShift();\n  }, []);\n\n  // Load admin data when admin tab is selected\n  useEffect(() => {\n    if (activeTab === 'admin' && isAdmin) {\n      if (adminSubTab === 'dashboard' && !dashboardData) {\n        loadDashboard();\n      } else if (adminSubTab === 'users' && adminUsers.length === 0) {\n        loadAdminUsers();\n      } else if (adminSubTab === 'shifts' && adminShifts.length === 0) {\n        loadAdminShifts();\n      } else if (adminSubTab === 'database' && dbTables.length === 0) {\n        loadDbTables();\n      }\n    }\n  }, [activeTab, adminSubTab, isAdmin]);\n\n  const loadDashboard = async () => {\n    setAdminLoading(true);\n    try {\n      const data = await adminAPI.getDashboard();\n      setDashboardData(data);\n    } catch (err) {\n      console.error('Failed to load dashboard:', err);\n      setAdminToast({ type: 'error', message: 'Failed to load dashboard' });\n    } finally {\n      setAdminLoading(false);\n    }\n  };\n\n  const loadAdminUsers = async (page = 1) => {\n    setAdminUsersLoading(true);\n    try {\n      const data = await adminAPI.getUsers({ page, limit: 25 });\n      setAdminUsers(data.users);\n      setAdminUsersPagination(data.pagination);\n    } catch (err) {\n      console.error('Failed to load users:', err);\n      setAdminToast({ type: 'error', message: 'Failed to load users' });\n    } finally {\n      setAdminUsersLoading(false);\n    }\n  };\n\n  const loadAdminShifts = async (page = 1) => {\n    setAdminLoading(true);\n    try {\n      const params = { page, limit: 25, ...adminShiftsFilters };\n      Object.keys(params).forEach(k => !params[k] && delete params[k]);\n      const data = await adminAPI.getShifts(params);\n      setAdminShifts(data.shifts.map(s => ({\n        ...s,\n        userName: s.user_name,\n        userEmail: s.user_email\n      })));\n      setAdminShiftsPagination(data.pagination);\n    } catch (err) {\n      console.error('Failed to load shifts:', err);\n      setAdminToast({ type: 'error', message: 'Failed to load shifts' });\n    } finally {\n      setAdminLoading(false);\n    }\n  };\n\n  const loadDbTables = async () => {\n    setTableLoading(true);\n    try {\n      const data = await adminAPI.getTables();\n      setDbTables(data.tables);\n    } catch (err) {\n      console.error('Failed to load tables:', err);\n      setAdminToast({ type: 'error', message: 'Failed to load database tables' });\n    } finally {\n      setTableLoading(false);\n    }\n  };\n\n  const loadTableData = async (tableName, page = 1) => {\n    setTableLoading(true);\n    try {\n      const data = await adminAPI.getTableData(tableName, { page, limit: 25 });\n      setTableData(data);\n      setSelectedTable(tableName);\n    } catch (err) {\n      console.error('Failed to load table data:', err);\n      setAdminToast({ type: 'error', message: 'Failed to load table data' });\n    } finally {\n      setTableLoading(false);\n    }\n  };\n\n  const handleUpdateUser = async (userId, updates) => {\n    try {\n      await adminAPI.updateUser(userId, updates);\n      setAdminToast({ type: 'success', message: 'User updated successfully' });\n      setEditingUser(null);\n      loadAdminUsers(adminUsersPagination.page);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to update user' });\n    }\n  };\n\n  const handleCreateUser = async () => {\n    try {\n      if (!newUserData.email || !newUserData.password || !newUserData.name) {\n        setAdminToast({ type: 'error', message: 'Email, password, and name are required' });\n        return;\n      }\n      if (newUserData.password.length < 6) {\n        setAdminToast({ type: 'error', message: 'Password must be at least 6 characters' });\n        return;\n      }\n      await adminAPI.createUser(newUserData);\n      setAdminToast({ type: 'success', message: 'User created successfully' });\n      setCreatingUser(false);\n      setNewUserData({ email: '', password: '', name: '', role: 'user', status: 'active' });\n      loadAdminUsers(1);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to create user' });\n    }\n  };\n\n  const handleDeactivateUser = async (userId) => {\n    if (deleteConfirmText !== 'DELETE') return;\n    try {\n      await adminAPI.deactivateUser(userId);\n      setAdminToast({ type: 'success', message: 'User deactivated' });\n      setDeleteConfirm(null);\n      setDeleteConfirmText('');\n      loadAdminUsers(adminUsersPagination.page);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to deactivate user' });\n    }\n  };\n\n  const handleCreateShift = async () => {\n    if (!newShiftData.userId) {\n      setAdminToast({ type: 'error', message: 'Please select a user' });\n      return;\n    }\n    if (!newShiftData.date || !newShiftData.clockInTime) {\n      setAdminToast({ type: 'error', message: 'Date and clock in time are required' });\n      return;\n    }\n    if (newShiftData.timeBlocks.length === 0) {\n      setAdminToast({ type: 'error', message: 'Please add at least one time block' });\n      return;\n    }\n\n    setSavingShift(true);\n    try {\n      // Calculate total hours from time blocks\n      let totalMinutes = 0;\n      for (const block of newShiftData.timeBlocks) {\n        if (block.startTime && block.endTime && !block.isBreak) {\n          const [startH, startM] = block.startTime.split(':').map(Number);\n          const [endH, endM] = block.endTime.split(':').map(Number);\n          let mins = (endH * 60 + endM) - (startH * 60 + startM);\n          if (mins < 0) mins += 24 * 60; // overnight\n          totalMinutes += mins;\n        }\n      }\n      const totalHours = (totalMinutes / 60).toFixed(2);\n\n      await adminAPI.createShift({\n        userId: parseInt(newShiftData.userId),\n        date: newShiftData.date,\n        clockInTime: localTimeToUTC(newShiftData.clockInTime, newShiftData.date),\n        clockOutTime: localTimeToUTC(newShiftData.clockOutTime, newShiftData.date),\n        totalHours: parseFloat(totalHours),\n        timeBlocks: newShiftData.timeBlocks.map(b => ({\n          startTime: localTimeToUTC(b.startTime, newShiftData.date),\n          endTime: localTimeToUTC(b.endTime, newShiftData.date),\n          tasks: b.tasks,\n          isBreak: b.isBreak\n        }))\n      });\n\n      setAdminToast({ type: 'success', message: 'Shift created successfully' });\n      setCreatingShift(false);\n      setNewShiftData({\n        userId: '',\n        date: new Date().toISOString().split('T')[0],\n        clockInTime: '08:00',\n        clockOutTime: '17:00',\n        timeBlocks: [{ id: Date.now(), startTime: '08:00', endTime: '17:00', tasks: '', isBreak: false }]\n      });\n      loadAdminShifts(1);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to create shift' });\n    } finally {\n      setSavingShift(false);\n    }\n  };\n\n  const addNewShiftBlock = () => {\n    const lastBlock = newShiftData.timeBlocks[newShiftData.timeBlocks.length - 1];\n    const newStartTime = lastBlock?.endTime || '08:00';\n    setNewShiftData({\n      ...newShiftData,\n      timeBlocks: [\n        ...newShiftData.timeBlocks,\n        { id: Date.now(), startTime: newStartTime, endTime: '', tasks: '', isBreak: false }\n      ]\n    });\n  };\n\n  const updateNewShiftBlock = (blockId, field, value) => {\n    setNewShiftData({\n      ...newShiftData,\n      timeBlocks: newShiftData.timeBlocks.map(b =>\n        b.id === blockId ? { ...b, [field]: value } : b\n      )\n    });\n  };\n\n  const removeNewShiftBlock = (blockId) => {\n    if (newShiftData.timeBlocks.length <= 1) return;\n    setNewShiftData({\n      ...newShiftData,\n      timeBlocks: newShiftData.timeBlocks.filter(b => b.id !== blockId)\n    });\n  };\n\n  const viewShiftDetails = async (shiftId) => {\n    try {\n      setViewingShiftLoading(true);\n      const shift = await adminAPI.getShift(shiftId);\n      setViewingShift(shift);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to load shift details' });\n    } finally {\n      setViewingShiftLoading(false);\n    }\n  };\n\n  const handleUpdateShift = async (shiftId, updates) => {\n    try {\n      await adminAPI.updateShift(shiftId, updates);\n      setAdminToast({ type: 'success', message: 'Shift updated successfully' });\n      setEditingShift(null);\n      loadAdminShifts(adminShiftsPagination.page);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to update shift' });\n    }\n  };\n\n  const handleDeleteShift = async (shiftId) => {\n    if (deleteConfirmText !== 'DELETE') return;\n    try {\n      await adminAPI.deleteShift(shiftId);\n      setAdminToast({ type: 'success', message: 'Shift deleted' });\n      setDeleteConfirm(null);\n      setDeleteConfirmText('');\n      loadAdminShifts(adminShiftsPagination.page);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to delete shift' });\n    }\n  };\n\n  const handleUpdateRow = async (tableName, rowId, updates) => {\n    try {\n      await adminAPI.updateTableRow(tableName, rowId, updates);\n      setAdminToast({ type: 'success', message: 'Row updated successfully' });\n      setEditingRow(null);\n      loadTableData(tableName, tableData.pagination.page);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to update row' });\n    }\n  };\n\n  const handleDeleteRow = async (tableName, rowId) => {\n    if (deleteConfirmText !== 'DELETE') return;\n    try {\n      await adminAPI.deleteTableRow(tableName, rowId);\n      setAdminToast({ type: 'success', message: 'Row deleted' });\n      setDeleteConfirm(null);\n      setDeleteConfirmText('');\n      loadTableData(tableName, tableData.pagination.page);\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to delete row' });\n    }\n  };\n\n  const handleExport = async (type) => {\n    try {\n      await adminAPI.downloadExport({ type, ...adminShiftsFilters });\n      setAdminToast({ type: 'success', message: 'Export downloaded' });\n    } catch (err) {\n      setAdminToast({ type: 'error', message: 'Export failed' });\n    }\n  };\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setShowUserDropdown(false);\n      }\n    };\n\n    if (showUserDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showUserDropdown]);\n\n  // Get actual current time (no offset)\n  const getActualTime = () => {\n    const now = new Date();\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    return `${hours}:${minutes}`;\n  };\n\n  // Get start time for \"Now\" - uses previous block's end time if available\n  const getStartTime = () => {\n    // If there are completed blocks, continue from last one's end time\n    if (completedBlocks.length > 0) {\n      const lastBlock = completedBlocks[completedBlocks.length - 1];\n      if (lastBlock.endTime) {\n        return lastBlock.endTime;\n      }\n    }\n    // Otherwise use actual current time\n    return getActualTime();\n  };\n\n  // Get end time = start time + offset (for \"Now\" on end time field)\n  const getEndTimeWithOffset = (startTime) => {\n    if (!startTime) return getActualTime();\n\n    const [h, m] = startTime.split(':').map(Number);\n    const baseTime = new Date(2000, 0, 1, h, m);\n\n    // Add offset to get end time\n    baseTime.setHours(baseTime.getHours() + nowOffsetHours);\n    baseTime.setMinutes(baseTime.getMinutes() + nowOffsetMins);\n\n    const hours = String(baseTime.getHours()).padStart(2, '0');\n    const minutes = String(baseTime.getMinutes()).padStart(2, '0');\n    return `${hours}:${minutes}`;\n  };\n\n  // Increment end time - if no end time, use start time as base\n  const incrementEndTime = (block, updateFn, minutes) => {\n    const baseTime = block.endTime || block.startTime;\n    if (!baseTime) return;\n    const newTime = addMinutesToTime(baseTime, minutes);\n    updateFn('endTime', newTime);\n  };\n\n  const addMinutesToTime = (time, minutesToAdd) => {\n    const [hours, minutes] = time.split(':').map(Number);\n    const date = new Date(2000, 0, 1, hours, minutes);\n    date.setMinutes(date.getMinutes() + minutesToAdd);\n    return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n  };\n\n  const calculateBlockHours = (startTime, endTime) => {\n    if (!startTime || !endTime) return null;\n\n    // Normalize time strings (handle HH:MM:SS and HH:MM formats)\n    const normalizeTime = (t) => {\n      if (typeof t !== 'string') return t;\n      // Take only HH:MM part\n      return t.split(':').slice(0, 2).join(':');\n    };\n\n    const start = normalizeTime(startTime);\n    const end = normalizeTime(endTime);\n\n    const startDate = new Date(`2000-01-01T${start}:00`);\n    let endDate = new Date(`2000-01-01T${end}:00`);\n\n    // Handle midnight crossing (e.g., 22:00 to 00:00)\n    if (endDate <= startDate) {\n      endDate = new Date(`2000-01-02T${end}:00`);\n    }\n\n    const diffMs = endDate - startDate;\n    const diffHours = diffMs / (1000 * 60 * 60);\n    return diffHours > 0 ? diffHours.toFixed(2) : '0.00';\n  };\n\n  const handleClockIn = async () => {\n    try {\n      const clockInTime = getStartTime();\n      // Create pending shift on server - convert to UTC for storage\n      const shift = await shiftsAPI.clockIn(currentDate, localTimeToUTC(clockInTime, currentDate));\n      setPendingShiftId(shift.id);\n\n      const newBlock = {\n        id: Date.now(),\n        startTime: clockInTime,\n        endTime: '',\n        tasks: ''\n      };\n      setCurrentBlock(newBlock);\n      setCurrentTasks(['']);\n    } catch (err) {\n      console.error('Failed to clock in:', err);\n      alert('Failed to start shift: ' + err.message);\n    }\n  };\n\n  // Join tasks array into a string, filtering empty entries\n  const joinTasks = (tasksArray) => {\n    return tasksArray.filter(t => t.trim()).join(' • ');\n  };\n\n  const handleAdvanceBlock = async () => {\n    if (!currentBlock || !currentBlock.endTime) return;\n\n    // Join tasks before completing\n    const completedBlock = {\n      ...currentBlock,\n      tasks: joinTasks(currentTasks)\n    };\n\n    // Trigger swipe animation\n    setSwipingBlockId(currentBlock.id);\n\n    setTimeout(async () => {\n      // Save block to server if we have a pending shift\n      if (pendingShiftId) {\n        try {\n          setAutoSaveStatus('saving');\n          const savedBlock = await shiftsAPI.addBlock(pendingShiftId, {\n            startTime: localTimeToUTC(completedBlock.startTime, currentDate),\n            endTime: localTimeToUTC(completedBlock.endTime, currentDate),\n            tasks: completedBlock.tasks,\n            isBreak: completedBlock.isBreak || false\n          });\n          // Update local block with server ID\n          completedBlock.serverId = savedBlock.id;\n          setAutoSaveStatus('saved');\n          setTimeout(() => setAutoSaveStatus('idle'), 2000);\n        } catch (err) {\n          console.error('Failed to save block:', err);\n          setAutoSaveStatus('error');\n          setTimeout(() => setAutoSaveStatus('idle'), 3000);\n        }\n      }\n\n      // Move current block to completed\n      setCompletedBlocks([...completedBlocks, completedBlock]);\n\n      // Create new current block with previous end time as start\n      const newBlock = {\n        id: Date.now(),\n        startTime: currentBlock.endTime,\n        endTime: '',\n        tasks: ''\n      };\n      setCurrentBlock(newBlock);\n      setCurrentTasks(['']);\n      setSwipingBlockId(null);\n      setEditingBlock(null);\n    }, 400);\n  };\n\n  const handleBreak = async () => {\n    if (!currentBlock) return;\n\n    // Break starts where current block ends (or use current block's end time if set)\n    // Do NOT use getActualTime() here - breaks should continue from last block\n    let breakStartTime;\n    if (currentBlock.endTime) {\n      breakStartTime = currentBlock.endTime;\n    } else if (completedBlocks.length > 0) {\n      // Use end time of last completed block\n      breakStartTime = completedBlocks[completedBlocks.length - 1].endTime;\n    } else {\n      // Fallback: use current block's start time\n      breakStartTime = currentBlock.startTime;\n    }\n\n    const breakEndTime = addMinutesToTime(breakStartTime, 15);\n\n    // Complete current block first if it has content\n    const joinedTasks = joinTasks(currentTasks);\n    let updatedBlocks = [...completedBlocks];\n    if (currentBlock.startTime && joinedTasks) {\n      const workBlock = { ...currentBlock, tasks: joinedTasks, endTime: breakStartTime };\n      // Save work block to server if we have a pending shift\n      if (pendingShiftId) {\n        try {\n          const savedBlock = await shiftsAPI.addBlock(pendingShiftId, {\n            startTime: localTimeToUTC(workBlock.startTime, currentDate),\n            endTime: localTimeToUTC(workBlock.endTime, currentDate),\n            tasks: workBlock.tasks,\n            isBreak: false\n          });\n          workBlock.serverId = savedBlock.id;\n        } catch (err) {\n          console.error('Failed to save work block:', err);\n        }\n      }\n      updatedBlocks = [...completedBlocks, workBlock];\n      setCompletedBlocks(updatedBlocks);\n    }\n\n    // Create break block and immediately complete it\n    const breakBlock = {\n      id: Date.now(),\n      startTime: breakStartTime,\n      endTime: breakEndTime,\n      tasks: '15 min Break',\n      isBreak: true\n    };\n\n    setSwipingBlockId(breakBlock.id);\n\n    setTimeout(async () => {\n      // Save break block to server\n      if (pendingShiftId) {\n        try {\n          setAutoSaveStatus('saving');\n          const savedBreak = await shiftsAPI.addBlock(pendingShiftId, {\n            startTime: localTimeToUTC(breakBlock.startTime, currentDate),\n            endTime: localTimeToUTC(breakBlock.endTime, currentDate),\n            tasks: breakBlock.tasks,\n            isBreak: true\n          });\n          breakBlock.serverId = savedBreak.id;\n          setAutoSaveStatus('saved');\n          setTimeout(() => setAutoSaveStatus('idle'), 2000);\n        } catch (err) {\n          console.error('Failed to save break:', err);\n          setAutoSaveStatus('error');\n          setTimeout(() => setAutoSaveStatus('idle'), 3000);\n        }\n      }\n\n      setCompletedBlocks(prev => [...prev, breakBlock]);\n\n      // Create new current block starting after break\n      const newBlock = {\n        id: Date.now() + 1,\n        startTime: breakEndTime,\n        endTime: '',\n        tasks: ''\n      };\n      setCurrentBlock(newBlock);\n      setCurrentTasks(['']);\n      setSwipingBlockId(null);\n    }, 400);\n  };\n\n  const updateCurrentBlock = (field, value) => {\n    setCurrentBlock({ ...currentBlock, [field]: value });\n  };\n\n  const updateEditingBlock = (field, value) => {\n    setEditingBlock({ ...editingBlock, [field]: value });\n  };\n\n  const handleEditBlock = (block) => {\n    // Track original position before removing\n    const originalIndex = completedBlocks.findIndex(b => b.id === block.id);\n    setEditingOriginalIndex(originalIndex);\n\n    // Save current block state and edit the selected block\n    setEditingBlock(block);\n    // Split existing tasks string into array for editing (skip for breaks)\n    const tasksArray = block.isBreak ? [''] : (block.tasks ? block.tasks.split(' • ') : ['']);\n    setEditingTasks(tasksArray.length > 0 ? tasksArray : ['']);\n    // Remove from completed blocks\n    setCompletedBlocks(completedBlocks.filter(b => b.id !== block.id));\n  };\n\n  // Helper to compare times accounting for overnight shifts\n  const timeToMinutes = (time) => {\n    if (!time) return 0;\n    const [h, m] = time.split(':').map(Number);\n    return h * 60 + m;\n  };\n\n  // Process blocks after edit - handle overlaps and gaps\n  const processBlocksAfterEdit = (blocks, savedBlock, insertIndex) => {\n    let updatedBlocks = [...blocks];\n    updatedBlocks.splice(insertIndex, 0, savedBlock);\n\n    const editedEndMinutes = timeToMinutes(savedBlock.endTime);\n\n    // Check if there's a next block\n    if (insertIndex + 1 < updatedBlocks.length) {\n      const nextBlock = updatedBlocks[insertIndex + 1];\n      const nextStartMinutes = timeToMinutes(nextBlock.startTime);\n\n      // Handle overlaps\n      if (editedEndMinutes > nextStartMinutes) {\n        // Complete overlap - remove blocks\n        let i = insertIndex + 1;\n        while (i < updatedBlocks.length) {\n          const block = updatedBlocks[i];\n          const blockStartMinutes = timeToMinutes(block.startTime);\n          const blockEndMinutes = timeToMinutes(block.endTime);\n\n          if (editedEndMinutes >= blockEndMinutes) {\n            updatedBlocks.splice(i, 1);\n          } else if (editedEndMinutes > blockStartMinutes) {\n            updatedBlocks[i] = { ...block, startTime: savedBlock.endTime };\n            i++;\n          } else {\n            break;\n          }\n        }\n        return { blocks: updatedBlocks, gap: null };\n      }\n\n      // Handle gap - edited end time is BEFORE next block's start\n      if (editedEndMinutes < nextStartMinutes) {\n        return {\n          blocks: updatedBlocks,\n          gap: {\n            startTime: savedBlock.endTime,\n            endTime: nextBlock.startTime,\n            gapIndex: insertIndex + 1\n          }\n        };\n      }\n    }\n\n    return { blocks: updatedBlocks, gap: null };\n  };\n\n  const handleSaveEdit = () => {\n    if (!editingBlock) return;\n\n    // Save original blocks in case we need to restore on gap cancel\n    // Include the editing block at its original position\n    const originalBlocks = [...completedBlocks];\n    originalBlocks.splice(editingOriginalIndex, 0, editingBlock);\n    setBlocksBeforeEdit(originalBlocks);\n\n    // Join tasks before saving (keep original for breaks)\n    const savedBlock = {\n      ...editingBlock,\n      tasks: editingBlock.isBreak ? editingBlock.tasks : joinTasks(editingTasks)\n    };\n\n    // Swipe the edited block back to completed\n    setSwipingBlockId(editingBlock.id);\n\n    setTimeout(() => {\n      const insertIndex = Math.min(editingOriginalIndex, completedBlocks.length);\n      const result = processBlocksAfterEdit(completedBlocks, savedBlock, insertIndex);\n\n      if (result.gap) {\n        // There's a gap - show modal to fill it\n        setGapData({\n          ...result.gap,\n          pendingBlocks: result.blocks\n        });\n        setGapTasks(['']);\n        setShowGapModal(true);\n      } else {\n        setCompletedBlocks(result.blocks);\n        setBlocksBeforeEdit(null);\n\n        // If the edited block is the last block and there's a current block,\n        // update the current block's start time to match the edited block's end time\n        const lastBlock = result.blocks[result.blocks.length - 1];\n        if (currentBlock && lastBlock && lastBlock.id === savedBlock.id && savedBlock.endTime) {\n          setCurrentBlock(prev => ({ ...prev, startTime: savedBlock.endTime }));\n        }\n      }\n\n      setEditingBlock(null);\n      setEditingTasks(['']);\n      setEditingOriginalIndex(null);\n      setSwipingBlockId(null);\n    }, 400);\n  };\n\n  // Handle filling a gap\n  const handleFillGap = () => {\n    if (!gapData) return;\n\n    const gapBlock = {\n      id: Date.now(),\n      startTime: gapData.startTime,\n      endTime: gapData.endTime,\n      tasks: joinTasks(gapTasks),\n      isBreak: false\n    };\n\n    // Insert the gap block\n    let updatedBlocks = [...gapData.pendingBlocks];\n    updatedBlocks.splice(gapData.gapIndex, 0, gapBlock);\n\n    // Check if this creates another gap or overlap\n    const gapEndMinutes = timeToMinutes(gapBlock.endTime);\n    const nextIndex = gapData.gapIndex + 1;\n\n    if (nextIndex < updatedBlocks.length) {\n      const nextBlock = updatedBlocks[nextIndex];\n      const nextStartMinutes = timeToMinutes(nextBlock.startTime);\n\n      // Still a gap?\n      if (gapEndMinutes < nextStartMinutes) {\n        setGapData({\n          startTime: gapBlock.endTime,\n          endTime: nextBlock.startTime,\n          pendingBlocks: updatedBlocks,\n          gapIndex: nextIndex\n        });\n        setGapTasks(['']);\n        return; // Keep modal open\n      }\n\n      // Overlap? Adjust next block\n      if (gapEndMinutes > nextStartMinutes) {\n        updatedBlocks[nextIndex] = { ...nextBlock, startTime: gapBlock.endTime };\n      }\n    }\n\n    setCompletedBlocks(updatedBlocks);\n    setShowGapModal(false);\n    setGapData(null);\n    setGapTasks(['']);\n    setBlocksBeforeEdit(null);\n  };\n\n  const handleCancelGap = () => {\n    // Cancel gap fill - restore blocks to state before the edit\n    if (blocksBeforeEdit) {\n      setCompletedBlocks(blocksBeforeEdit);\n    }\n    setShowGapModal(false);\n    setGapData(null);\n    setGapTasks(['']);\n    setBlocksBeforeEdit(null);\n  };\n\n  const handleCancelEdit = () => {\n    // Restore the editing block to completed at original position\n    if (editingBlock) {\n      const updatedBlocks = [...completedBlocks];\n      const insertIndex = Math.min(editingOriginalIndex ?? updatedBlocks.length, updatedBlocks.length);\n      updatedBlocks.splice(insertIndex, 0, editingBlock);\n      setCompletedBlocks(updatedBlocks);\n    }\n    setEditingBlock(null);\n    setEditingTasks(['']);\n    setEditingOriginalIndex(null);\n  };\n\n  const removeCompletedBlock = (id) => {\n    setCompletedBlocks(completedBlocks.filter(b => b.id !== id));\n  };\n\n  const handleChangePassword = async () => {\n    setPasswordError('');\n\n    if (!passwordData.current || !passwordData.new || !passwordData.confirm) {\n      setPasswordError('All fields are required');\n      return;\n    }\n\n    if (passwordData.new !== passwordData.confirm) {\n      setPasswordError('New passwords do not match');\n      return;\n    }\n\n    if (passwordData.new.length < 6) {\n      setPasswordError('New password must be at least 6 characters');\n      return;\n    }\n\n    setChangingPassword(true);\n    try {\n      await authAPI.changePassword(passwordData.current, passwordData.new);\n      setPasswordSuccess(true);\n      setPasswordData({ current: '', new: '', confirm: '' });\n      setTimeout(() => {\n        setShowPasswordModal(false);\n        setPasswordSuccess(false);\n      }, 2000);\n    } catch (err) {\n      setPasswordError(err.message || 'Failed to change password');\n    } finally {\n      setChangingPassword(false);\n    }\n  };\n\n  const closePasswordModal = () => {\n    setShowPasswordModal(false);\n    setPasswordData({ current: '', new: '', confirm: '' });\n    setPasswordError('');\n    setPasswordSuccess(false);\n  };\n\n  const handleChangeEmail = async () => {\n    setEmailError('');\n\n    if (!emailData.newEmail || !emailData.password) {\n      setEmailError('Email and password are required');\n      return;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(emailData.newEmail)) {\n      setEmailError('Invalid email format');\n      return;\n    }\n\n    setChangingEmail(true);\n    try {\n      const result = await authAPI.changeEmail(emailData.newEmail, emailData.password);\n      // Update token in localStorage\n      if (result.token) {\n        localStorage.setItem('token', result.token);\n      }\n      setEmailSuccess(true);\n      setEmailData({ newEmail: '', password: '' });\n      setTimeout(() => {\n        setShowEmailModal(false);\n        setEmailSuccess(false);\n        // Reload to update user info\n        window.location.reload();\n      }, 2000);\n    } catch (err) {\n      setEmailError(err.message || 'Failed to change email');\n    } finally {\n      setChangingEmail(false);\n    }\n  };\n\n  const closeEmailModal = () => {\n    setShowEmailModal(false);\n    setEmailData({ newEmail: '', password: '' });\n    setEmailError('');\n    setEmailSuccess(false);\n  };\n\n  const handleAdminResetPassword = async () => {\n    if (!resetPasswordValue || resetPasswordValue.length < 6) {\n      setAdminToast({ type: 'error', message: 'Password must be at least 6 characters' });\n      return;\n    }\n\n    setResettingPassword(true);\n    try {\n      await adminAPI.resetUserPassword(resetPasswordUser.id, resetPasswordValue);\n      setAdminToast({ type: 'success', message: `Password reset for ${resetPasswordUser.name}` });\n      setResetPasswordUser(null);\n      setResetPasswordValue('');\n    } catch (err) {\n      setAdminToast({ type: 'error', message: err.message || 'Failed to reset password' });\n    } finally {\n      setResettingPassword(false);\n    }\n  };\n\n  const closeResetPasswordModal = () => {\n    setResetPasswordUser(null);\n    setResetPasswordValue('');\n  };\n\n  const clientTasks = [\n    'Fixed responsive layout issues on mobile',\n    'Implemented form validation for user inputs',\n    'Added loading spinners and skeleton screens',\n    'Debugged API integration issues',\n    'Optimized React component rendering',\n    'Styled buttons and input components',\n    'Created reusable modal component',\n    'Fixed CSS grid alignment on dashboard',\n    'Implemented state management for cart',\n    'Added error handling for fetch requests',\n    'Built date picker component',\n    'Fixed cross-browser compatibility issues',\n    'Implemented infinite scroll pagination',\n    'Added toast notifications system',\n    'Refactored authentication flow'\n  ];\n\n  const generateTestShift = () => {\n    const blocks = [];\n    let currentHour = 8;\n    let currentMinute = 0;\n    let breakCount = 0;\n    const totalBlocks = testBlocks + testBreaks;\n    const breakInterval = Math.floor(totalBlocks / (testBreaks + 1));\n\n    for (let i = 0; i < totalBlocks; i++) {\n      const startTime = `${String(currentHour).padStart(2, '0')}:${String(currentMinute).padStart(2, '0')}`;\n      const isBreak = breakCount < testBreaks && (i + 1) % breakInterval === 0;\n      const duration = isBreak ? 15 : (45 + Math.floor(Math.random() * 45));\n\n      currentMinute += duration;\n      while (currentMinute >= 60) {\n        currentHour++;\n        currentMinute -= 60;\n      }\n\n      const endTime = `${String(currentHour).padStart(2, '0')}:${String(currentMinute).padStart(2, '0')}`;\n\n      if (isBreak) {\n        blocks.push({\n          id: Date.now() + i,\n          startTime,\n          endTime,\n          tasks: '15 min Break',\n          isBreak: true\n        });\n        breakCount++;\n      } else {\n        blocks.push({\n          id: Date.now() + i,\n          startTime,\n          endTime,\n          tasks: clientTasks[Math.floor(Math.random() * clientTasks.length)]\n        });\n      }\n    }\n\n    // All but last go to completed, last becomes current\n    if (blocks.length > 0) {\n      setCompletedBlocks(blocks.slice(0, -1));\n      const lastBlock = blocks[blocks.length - 1];\n      setCurrentBlock({\n        ...lastBlock,\n        endTime: '', // Make it editable\n      });\n      // Set the tasks array from the last block\n      setCurrentTasks(lastBlock.tasks ? [lastBlock.tasks] : ['']);\n    }\n    setEditingBlock(null);\n    setEditingTasks(['']);\n  };\n\n  const clearAll = () => {\n    setCompletedBlocks([]);\n    setCurrentBlock(null);\n    setCurrentTasks(['']);\n    setEditingBlock(null);\n    setEditingTasks(['']);\n    setPendingShiftId(null);\n    setAutoSaveStatus('idle');\n  };\n\n  const calculateTotalHours = () => {\n    let total = 0;\n    [...completedBlocks, currentBlock].filter(Boolean).forEach(block => {\n      const hrs = calculateBlockHours(block.startTime, block.endTime);\n      if (hrs) total += parseFloat(hrs);\n    });\n    return total.toFixed(2);\n  };\n\n  // Preview shift before saving - shows confirmation modal\n  const previewShift = () => {\n    const allBlocks = [...completedBlocks];\n    // Include current block only if fully filled out (start time, end time, AND tasks)\n    // This ignores placeholder blocks that only have a start time from \"Next Block\"\n    const currentJoinedTasks = joinTasks(currentTasks);\n    if (currentBlock && currentBlock.startTime && currentBlock.endTime && currentJoinedTasks) {\n      allBlocks.push({ ...currentBlock, tasks: currentJoinedTasks });\n    }\n\n    const validBlocks = allBlocks.filter(block => block.startTime && block.endTime && block.tasks);\n\n    if (validBlocks.length === 0) {\n      alert('Please add at least one complete time block (start time, end time, and tasks)');\n      return;\n    }\n\n    // Don't sort - preserve the order user entered them (handles overnight shifts correctly)\n    const clockInTime = validBlocks[0].startTime;\n    const clockOutTime = validBlocks[validBlocks.length - 1].endTime || validBlocks[validBlocks.length - 1].startTime;\n    const totalHours = calculateTotalHours();\n\n    const shiftData = {\n      date: currentDate,\n      clockInTime,\n      clockOutTime,\n      totalHours,\n      timeBlocks: validBlocks\n    };\n\n    setPreviewShiftData(shiftData);\n    setShowPreviewModal(true);\n  };\n\n  // Actually save the shift after confirmation (Clock Out)\n  const confirmSave = async () => {\n    if (!previewShiftData) return;\n\n    setSaving(true);\n    try {\n      let completedShift;\n\n      if (pendingShiftId) {\n        // Save any unsaved current block before clock out\n        // The current block is included in previewShiftData.timeBlocks but may not have been saved yet\n        const currentJoinedTasks = joinTasks(currentTasks);\n        if (currentBlock && currentBlock.startTime && currentBlock.endTime && currentJoinedTasks) {\n          // Check if this block was already saved (exists in completedBlocks)\n          const alreadySaved = completedBlocks.some(b => b.id === currentBlock.id);\n          if (!alreadySaved) {\n            await shiftsAPI.addBlock(pendingShiftId, {\n              startTime: localTimeToUTC(currentBlock.startTime, previewShiftData.date),\n              endTime: localTimeToUTC(currentBlock.endTime, previewShiftData.date),\n              tasks: currentJoinedTasks,\n              isBreak: currentBlock.isBreak || false\n            });\n          }\n        }\n\n        // Complete the pending shift (clock out) - convert to UTC\n        // Send both clockInTime (from first block) and clockOutTime (from last block)\n        completedShift = await shiftsAPI.clockOut(\n          pendingShiftId,\n          localTimeToUTC(previewShiftData.clockInTime, previewShiftData.date),\n          localTimeToUTC(previewShiftData.clockOutTime, previewShiftData.date),\n          previewShiftData.totalHours\n        );\n      } else {\n        // Fallback: create new shift (shouldn't happen with new flow)\n        completedShift = await shiftsAPI.create(previewShiftData);\n      }\n\n      setShifts([completedShift, ...shifts]);\n\n      // Show toast with preview\n      setToast({\n        message: 'Shift saved successfully!',\n        shift: previewShiftData\n      });\n      setTimeout(() => setToast(null), 5000);\n\n      setShowPreviewModal(false);\n      setPreviewShiftData(null);\n      clearAll();\n    } catch (err) {\n      alert('Failed to save shift: ' + err.message);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const cancelPreview = () => {\n    setShowPreviewModal(false);\n    setPreviewShiftData(null);\n  };\n\n  // Recovery modal handlers\n  const handleResumeRecovery = () => {\n    if (!recoveryShift) return;\n\n    // Set the pending shift ID\n    setPendingShiftId(recoveryShift.id);\n    setCurrentDate(recoveryShift.date);\n\n    // Load saved blocks into completed blocks\n    const savedBlocks = recoveryShift.timeBlocks || [];\n    setCompletedBlocks(savedBlocks.map(block => ({\n      ...block,\n      serverId: block.id\n    })));\n\n    // Create a new current block starting from last block's end time\n    if (savedBlocks.length > 0) {\n      const lastBlock = savedBlocks[savedBlocks.length - 1];\n      setCurrentBlock({\n        id: Date.now(),\n        startTime: lastBlock.endTime || lastBlock.startTime,\n        endTime: '',\n        tasks: ''\n      });\n    } else {\n      setCurrentBlock({\n        id: Date.now(),\n        startTime: recoveryShift.clockInTime || getActualTime(),\n        endTime: '',\n        tasks: ''\n      });\n    }\n    setCurrentTasks(['']);\n    setShowRecoveryModal(false);\n    setRecoveryShift(null);\n  };\n\n  const handleDiscardRecovery = () => {\n    // Show confirmation before discarding\n    setShowDiscardConfirm(true);\n  };\n\n  const confirmDiscardRecovery = async () => {\n    if (!recoveryShift) return;\n\n    try {\n      await shiftsAPI.discard(recoveryShift.id);\n      setShowRecoveryModal(false);\n      setShowDiscardConfirm(false);\n      setRecoveryShift(null);\n    } catch (err) {\n      console.error('Failed to discard shift:', err);\n      alert('Failed to discard shift: ' + err.message);\n    }\n  };\n\n  const cancelDiscardRecovery = () => {\n    setShowDiscardConfirm(false);\n  };\n\n  // Clock out the recovered shift as-is (user forgot to clock out)\n  const handleClockOutRecovery = async () => {\n    if (!recoveryShift || !recoveryShift.timeBlocks || recoveryShift.timeBlocks.length === 0) {\n      alert('Cannot clock out - no time blocks saved');\n      return;\n    }\n\n    try {\n      // Calculate total hours from saved blocks\n      let totalHours = 0;\n      recoveryShift.timeBlocks.forEach(block => {\n        const hrs = calculateBlockHours(block.startTime, block.endTime);\n        if (hrs) totalHours += parseFloat(hrs);\n      });\n\n      // Get clock in/out times from first/last blocks\n      const firstBlock = recoveryShift.timeBlocks[0];\n      const lastBlock = recoveryShift.timeBlocks[recoveryShift.timeBlocks.length - 1];\n      const clockInTime = firstBlock.startTime;\n      const clockOutTime = lastBlock.endTime;\n\n      // Complete the shift (times already in UTC from server)\n      const completedShift = await shiftsAPI.clockOut(\n        recoveryShift.id,\n        clockInTime,\n        clockOutTime,\n        totalHours.toFixed(2)\n      );\n\n      // Add to shifts list\n      setShifts([completedShift, ...shifts]);\n\n      // Show toast\n      setToast({\n        message: 'Shift clocked out successfully!',\n        shift: completedShift\n      });\n      setTimeout(() => setToast(null), 5000);\n\n      setShowRecoveryModal(false);\n      setRecoveryShift(null);\n    } catch (err) {\n      console.error('Failed to clock out:', err);\n      alert('Failed to clock out: ' + err.message);\n    }\n  };\n\n  const formatTime = (time) => {\n    if (!time) return '--:--';\n\n    let hour, minute;\n\n    // Handle Date objects\n    if (time instanceof Date) {\n      hour = time.getHours();\n      minute = time.getMinutes();\n    }\n    // Handle ISO timestamp strings (e.g., \"2026-01-27T15:45:00.000Z\")\n    else if (typeof time === 'string' && (time.includes('T') || (time.includes(' ') && time.includes('-')))) {\n      const date = new Date(time);\n      if (!isNaN(date.getTime())) {\n        hour = date.getHours();\n        minute = date.getMinutes();\n      }\n    }\n    // Handle object with hours/minutes (some DB drivers return this)\n    else if (typeof time === 'object' && time !== null && !Array.isArray(time)) {\n      if ('hours' in time || 'minutes' in time) {\n        hour = time.hours || 0;\n        minute = time.minutes || 0;\n      }\n    }\n    // Handle \"HH:MM\" or \"HH:MM:SS\" format strings\n    else if (typeof time === 'string') {\n      const parts = time.split(':');\n      if (parts.length >= 2) {\n        hour = parseInt(parts[0]);\n        minute = parseInt(parts[1]);\n      }\n    }\n\n    // Validate we got valid numbers\n    if (hour === undefined || minute === undefined || isNaN(hour) || isNaN(minute)) {\n      console.log('Unexpected time format:', time, typeof time);\n      return '--:--';\n    }\n\n    const ampm = hour >= 12 ? 'PM' : 'AM';\n    const formattedHour = hour % 12 || 12;\n    return `${formattedHour}:${String(minute).padStart(2, '0')} ${ampm}`;\n  };\n\n  const formatDate = (dateStr) => {\n    if (!dateStr) return 'Invalid Date';\n    try {\n      let date;\n      // Handle Date objects, ISO strings, and YYYY-MM-DD strings\n      if (dateStr instanceof Date) {\n        date = dateStr;\n      } else if (typeof dateStr === 'string') {\n        // If it's just YYYY-MM-DD, add time to avoid timezone issues\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateStr)) {\n          date = new Date(dateStr + 'T12:00:00');\n        } else {\n          date = new Date(dateStr);\n        }\n      } else {\n        return 'Invalid Date';\n      }\n      if (isNaN(date.getTime())) return 'Invalid Date';\n      return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });\n    } catch {\n      return 'Invalid Date';\n    }\n  };\n\n  const blockCount = completedBlocks.length + (currentBlock ? 1 : 0);\n\n  const toggleShiftExpanded = (shiftId) => {\n    setExpandedShifts(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(shiftId)) {\n        newSet.delete(shiftId);\n      } else {\n        newSet.add(shiftId);\n      }\n      return newSet;\n    });\n  };\n\n  return (\n    <div className=\"app\">\n      {/* Toast Notification */}\n      {toast && (\n        <div className=\"toast\">\n          <div className=\"toast-header\">\n            <span className=\"toast-message\">{toast.message}</span>\n            <button className=\"toast-close\" onClick={() => setToast(null)}>&times;</button>\n          </div>\n          <div className=\"toast-preview\">\n            <div className=\"toast-date\">{formatDate(toast.shift.date)}</div>\n            <div className=\"toast-times\">\n              {formatTime(toast.shift.clockInTime)} - {formatTime(toast.shift.clockOutTime)}\n            </div>\n            <div className=\"toast-hours\">{toast.shift.totalHours} hours</div>\n            <div className=\"toast-blocks\">\n              {toast.shift.timeBlocks.filter(b => !b.isBreak).slice(0, 3).map((b, i) => (\n                <div key={i} className=\"toast-block-item\">{b.tasks}</div>\n              ))}\n              {toast.shift.timeBlocks.filter(b => !b.isBreak).length > 3 && (\n                <div className=\"toast-more\">+{toast.shift.timeBlocks.filter(b => !b.isBreak).length - 3} more</div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Confirmation Modal */}\n      {showPreviewModal && previewShiftData && (\n        <div className=\"modal-overlay\" onClick={cancelPreview}>\n          <div className=\"preview-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Review Your Shift</h2>\n              <button className=\"modal-close\" onClick={cancelPreview}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"preview-summary\">\n                <div className=\"preview-date\">{formatDate(previewShiftData.date)}</div>\n                <div className=\"preview-times\">\n                  <span className=\"preview-label\">Clock In/Out:</span>\n                  <span>{formatTime(previewShiftData.clockInTime)} - {formatTime(previewShiftData.clockOutTime)}</span>\n                </div>\n                <div className=\"preview-total\">\n                  <span className=\"preview-label\">Total Hours:</span>\n                  <strong>{previewShiftData.totalHours} hrs</strong>\n                </div>\n              </div>\n              <div className=\"preview-blocks\">\n                <h3>Time Blocks</h3>\n                {previewShiftData.timeBlocks.map((block, index) => {\n                  // Count only work blocks for numbering\n                  const workBlockNumber = previewShiftData.timeBlocks\n                    .slice(0, index + 1)\n                    .filter(b => !b.isBreak).length;\n                  return (\n                  <div key={index} className={`preview-block ${block.isBreak ? 'break-block' : ''}`}>\n                    <div className=\"preview-block-header\">\n                      <span className=\"preview-block-num\">\n                        {block.isBreak ? 'Break' : `Block ${workBlockNumber}`}\n                      </span>\n                      <span className=\"preview-block-time\">\n                        {formatTime(block.startTime)} - {formatTime(block.endTime)}\n                      </span>\n                      <span className=\"preview-block-hours\">\n                        {calculateBlockHours(block.startTime, block.endTime)}h\n                      </span>\n                    </div>\n                    <div className=\"preview-block-tasks\">\n                      {block.tasks.split(' • ').map((task, i) => (\n                        <div key={i} className=\"preview-task-item\">{task}</div>\n                      ))}\n                    </div>\n                  </div>\n                  );\n                })}\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn-cancel-modal\" onClick={cancelPreview}>\n                Go Back & Edit\n              </button>\n              <button className=\"btn-confirm-modal\" onClick={confirmSave} disabled={saving}>\n                {saving ? 'Saving...' : 'Confirm & Save'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Gap Fill Modal */}\n      {showGapModal && gapData && (\n        <div className=\"modal-overlay\">\n          <div className=\"preview-modal gap-modal\">\n            <div className=\"modal-header\">\n              <h2>Fill Time Gap</h2>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"gap-warning\">\n                Your edit created a gap in the timeline. Please fill in what you worked on during this time.\n              </div>\n              <div className=\"gap-times\">\n                <div className=\"time-field\">\n                  <label>Gap Start</label>\n                  <div className=\"time-input-group\">\n                    <input\n                      type=\"time\"\n                      value={gapData.startTime}\n                      onChange={(e) => setGapData({ ...gapData, startTime: e.target.value })}\n                    />\n                  </div>\n                </div>\n                <div className=\"time-field\">\n                  <label>Gap End</label>\n                  <div className=\"time-input-group\">\n                    <input\n                      type=\"time\"\n                      value={gapData.endTime}\n                      onChange={(e) => setGapData({ ...gapData, endTime: e.target.value })}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"gap-duration\">\n                Duration: <strong>{calculateBlockHours(gapData.startTime, gapData.endTime)} hrs</strong>\n              </div>\n              <div className=\"task-field\">\n                <label>What did you work on?</label>\n                {gapTasks.map((task, index) => (\n                  <div key={index} className=\"task-input-row\">\n                    <input\n                      type=\"text\"\n                      value={task}\n                      onChange={(e) => {\n                        const newTasks = [...gapTasks];\n                        newTasks[index] = e.target.value;\n                        setGapTasks(newTasks);\n                      }}\n                      placeholder={index === 0 ? \"Enter task...\" : \"Another task...\"}\n                    />\n                    {gapTasks.length > 1 && (\n                      <button\n                        type=\"button\"\n                        className=\"btn-remove-task\"\n                        onClick={() => setGapTasks(gapTasks.filter((_, i) => i !== index))}\n                      >\n                        −\n                      </button>\n                    )}\n                  </div>\n                ))}\n                <button\n                  type=\"button\"\n                  className=\"btn-add-task\"\n                  onClick={() => setGapTasks([...gapTasks, ''])}\n                >\n                  + Add Task\n                </button>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn-cancel-modal\" onClick={handleCancelGap}>\n                Cancel Edit\n              </button>\n              <button\n                className=\"btn-confirm-modal\"\n                onClick={handleFillGap}\n                disabled={!gapTasks.some(t => t.trim())}\n              >\n                Fill Gap\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Password Reset Modal */}\n      {showPasswordModal && (\n        <div className=\"modal-overlay\" onClick={closePasswordModal}>\n          <div className=\"preview-modal password-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Change Password</h2>\n              <button className=\"modal-close\" onClick={closePasswordModal}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              {passwordSuccess ? (\n                <div className=\"password-success\">\n                  Password changed successfully!\n                </div>\n              ) : (\n                <>\n                  {passwordError && (\n                    <div className=\"password-error\">{passwordError}</div>\n                  )}\n                  <div className=\"password-field\">\n                    <label>Current Password</label>\n                    <input\n                      type=\"password\"\n                      value={passwordData.current}\n                      onChange={(e) => setPasswordData({ ...passwordData, current: e.target.value })}\n                      placeholder=\"Enter current password\"\n                    />\n                  </div>\n                  <div className=\"password-field\">\n                    <label>New Password</label>\n                    <input\n                      type=\"password\"\n                      value={passwordData.new}\n                      onChange={(e) => setPasswordData({ ...passwordData, new: e.target.value })}\n                      placeholder=\"Enter new password\"\n                    />\n                  </div>\n                  <div className=\"password-field\">\n                    <label>Confirm New Password</label>\n                    <input\n                      type=\"password\"\n                      value={passwordData.confirm}\n                      onChange={(e) => setPasswordData({ ...passwordData, confirm: e.target.value })}\n                      placeholder=\"Confirm new password\"\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n            {!passwordSuccess && (\n              <div className=\"modal-footer\">\n                <button className=\"btn-cancel-modal\" onClick={closePasswordModal}>\n                  Cancel\n                </button>\n                <button\n                  className=\"btn-confirm-modal\"\n                  onClick={handleChangePassword}\n                  disabled={changingPassword}\n                >\n                  {changingPassword ? 'Changing...' : 'Change Password'}\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Email Change Modal */}\n      {showEmailModal && (\n        <div className=\"modal-overlay\" onClick={closeEmailModal}>\n          <div className=\"preview-modal password-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Change Email</h2>\n              <button className=\"modal-close\" onClick={closeEmailModal}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              {emailSuccess ? (\n                <div className=\"password-success\">\n                  Email changed successfully!\n                </div>\n              ) : (\n                <>\n                  {emailError && (\n                    <div className=\"password-error\">{emailError}</div>\n                  )}\n                  <div className=\"password-field\">\n                    <label>New Email</label>\n                    <input\n                      type=\"email\"\n                      value={emailData.newEmail}\n                      onChange={(e) => setEmailData({ ...emailData, newEmail: e.target.value })}\n                      placeholder=\"Enter new email address\"\n                    />\n                  </div>\n                  <div className=\"password-field\">\n                    <label>Current Password</label>\n                    <input\n                      type=\"password\"\n                      value={emailData.password}\n                      onChange={(e) => setEmailData({ ...emailData, password: e.target.value })}\n                      placeholder=\"Enter your password to confirm\"\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n            {!emailSuccess && (\n              <div className=\"modal-footer\">\n                <button className=\"btn-cancel-modal\" onClick={closeEmailModal}>\n                  Cancel\n                </button>\n                <button\n                  className=\"btn-confirm-modal\"\n                  onClick={handleChangeEmail}\n                  disabled={changingEmail}\n                >\n                  {changingEmail ? 'Changing...' : 'Change Email'}\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Admin Reset Password Modal */}\n      {resetPasswordUser && (\n        <div className=\"modal-overlay\" onClick={closeResetPasswordModal}>\n          <div className=\"preview-modal password-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Reset Password</h2>\n              <button className=\"modal-close\" onClick={closeResetPasswordModal}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              <p style={{ marginBottom: '16px', color: '#666' }}>\n                Reset password for <strong>{resetPasswordUser.name}</strong> ({resetPasswordUser.email})\n              </p>\n              <div className=\"password-field\">\n                <label>New Password</label>\n                <input\n                  type=\"password\"\n                  value={resetPasswordValue}\n                  onChange={(e) => setResetPasswordValue(e.target.value)}\n                  placeholder=\"Enter new password (min 6 characters)\"\n                />\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn-cancel-modal\" onClick={closeResetPasswordModal}>\n                Cancel\n              </button>\n              <button\n                className=\"btn-confirm-modal\"\n                onClick={handleAdminResetPassword}\n                disabled={resettingPassword}\n              >\n                {resettingPassword ? 'Resetting...' : 'Reset Password'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Recovery Modal */}\n      {showRecoveryModal && recoveryShift && (\n        <div className=\"modal-overlay\">\n          <div className=\"preview-modal recovery-modal\">\n            <div className=\"modal-header\">\n              <h2>Resume Previous Shift?</h2>\n            </div>\n            <div className=\"modal-body\">\n              {showDiscardConfirm ? (\n                <div className=\"discard-confirm\">\n                  <p className=\"discard-warning\">Are you sure you want to discard this shift?</p>\n                  <p className=\"discard-subtext\">This will permanently delete all {recoveryShift.timeBlocks?.length || 0} saved block(s).</p>\n                </div>\n              ) : (\n                <>\n                  <div className=\"recovery-info\">\n                    <p>You have an unfinished shift from <strong>{formatDate(recoveryShift.date)}</strong></p>\n                    <p className=\"recovery-blocks-count\">\n                      {recoveryShift.timeBlocks?.length || 0} time block(s) saved\n                    </p>\n                  </div>\n                  {recoveryShift.timeBlocks && recoveryShift.timeBlocks.length > 0 && (\n                    <div className=\"preview-blocks\">\n                      <h3>Saved Blocks</h3>\n                      {recoveryShift.timeBlocks.map((block, index) => (\n                        <div key={index} className={`preview-block ${block.isBreak ? 'break-block' : ''}`}>\n                          <div className=\"preview-block-header\">\n                            <span className=\"preview-block-time\">\n                              {formatTime(block.startTime)} - {formatTime(block.endTime)}\n                            </span>\n                          </div>\n                          <div className=\"preview-block-tasks\">{block.tasks}</div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n            <div className=\"modal-footer recovery-footer\">\n              {showDiscardConfirm ? (\n                <>\n                  <button className=\"btn-cancel-modal\" onClick={cancelDiscardRecovery}>\n                    Go Back\n                  </button>\n                  <button className=\"btn-danger\" onClick={confirmDiscardRecovery}>\n                    Yes, Discard\n                  </button>\n                </>\n              ) : (\n                <>\n                  <button className=\"btn-cancel-modal\" onClick={handleDiscardRecovery}>\n                    Discard & Start Fresh\n                  </button>\n                  {recoveryShift.timeBlocks && recoveryShift.timeBlocks.length > 0 && (\n                    <button className=\"btn-secondary\" onClick={handleClockOutRecovery}>\n                      Clock Out Now\n                    </button>\n                  )}\n                  <button className=\"btn-confirm-modal\" onClick={handleResumeRecovery}>\n                    Resume Shift\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Auto-save indicator */}\n      {autoSaveStatus !== 'idle' && (\n        <div className={`auto-save-indicator ${autoSaveStatus}`}>\n          {autoSaveStatus === 'saving' && 'Saving...'}\n          {autoSaveStatus === 'saved' && 'Saved'}\n          {autoSaveStatus === 'error' && 'Save failed'}\n        </div>\n      )}\n\n      <header className=\"header\">\n        <div className=\"header-top\">\n          <h1>Time Clock</h1>\n          <div className=\"header-right\">\n            <div className=\"test-controls\">\n              <div className=\"test-row\">\n                <select value={testBlocks} onChange={(e) => setTestBlocks(Number(e.target.value))}>\n                  {[1, 2, 3, 4, 5, 6, 7, 8].map(n => (\n                    <option key={n} value={n}>{n} blocks</option>\n                  ))}\n                </select>\n                <select value={testBreaks} onChange={(e) => setTestBreaks(Number(e.target.value))}>\n                  {[0, 1, 2, 3, 4].map(n => (\n                    <option key={n} value={n}>{n} breaks</option>\n                  ))}\n                </select>\n                <button type=\"button\" className=\"btn-test\" onClick={generateTestShift}>\n                  Generate\n                </button>\n                {(completedBlocks.length > 0 || currentBlock) && (\n                  <button type=\"button\" className=\"btn-clear\" onClick={clearAll}>\n                    Clear\n                  </button>\n                )}\n              </div>\n              <div className=\"test-row\">\n                <span className=\"now-offset-label\">Block +</span>\n                <select value={nowOffsetHours} onChange={(e) => setNowOffsetHours(Number(e.target.value))}>\n                  {[0, 1, 2, 3, 4, 5].map(n => (\n                    <option key={n} value={n}>{n}h</option>\n                  ))}\n                </select>\n                <select value={nowOffsetMins} onChange={(e) => setNowOffsetMins(Number(e.target.value))}>\n                  {[0, 15, 30, 45].map(n => (\n                    <option key={n} value={n}>{n}m</option>\n                  ))}\n                </select>\n                <button\n                  type=\"button\"\n                  className=\"btn-random-task\"\n                  onClick={() => {\n                    if (currentBlock) {\n                      const randomTask = clientTasks[Math.floor(Math.random() * clientTasks.length)];\n                      // Add to first empty slot or append\n                      const emptyIndex = currentTasks.findIndex(t => !t.trim());\n                      if (emptyIndex >= 0) {\n                        const newTasks = [...currentTasks];\n                        newTasks[emptyIndex] = randomTask;\n                        setCurrentTasks(newTasks);\n                      } else {\n                        setCurrentTasks([...currentTasks, randomTask]);\n                      }\n                    }\n                  }}\n                  disabled={!currentBlock}\n                >\n                  Random Task\n                </button>\n              </div>\n            </div>\n            <div className=\"user-info\">\n              <div className=\"user-dropdown-container\" ref={dropdownRef}>\n                <button\n                  className=\"user-name-btn\"\n                  onClick={() => setShowUserDropdown(!showUserDropdown)}\n                >\n                  {user.name}\n                  <span className=\"dropdown-arrow\">{showUserDropdown ? '▲' : '▼'}</span>\n                </button>\n                {showUserDropdown && (\n                  <div className=\"user-dropdown\">\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => {\n                        setShowPasswordModal(true);\n                        setShowUserDropdown(false);\n                      }}\n                    >\n                      Change Password\n                    </button>\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => {\n                        setShowEmailModal(true);\n                        setShowUserDropdown(false);\n                      }}\n                    >\n                      Change Email\n                    </button>\n                    <button className=\"dropdown-item logout-item\" onClick={logout}>\n                      Logout\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Tab Navigation */}\n      <div className=\"tab-nav\">\n        {isAdmin && (\n          <button\n            className={`tab-btn admin-tab ${activeTab === 'admin' ? 'active' : ''}`}\n            onClick={() => setActiveTab('admin')}\n          >\n            Admin Panel\n          </button>\n        )}\n        <button\n          className={`tab-btn ${activeTab === 'today' ? 'active' : ''}`}\n          onClick={() => setActiveTab('today')}\n        >\n          Today's Shift\n        </button>\n        <button\n          className={`tab-btn ${activeTab === 'history' ? 'active' : ''}`}\n          onClick={() => setActiveTab('history')}\n        >\n          Shift History\n        </button>\n      </div>\n\n      {activeTab === 'today' ? (\n        <main className=\"main-grid\">\n          {/* Column 1 - Active Input Block(s) */}\n          <section className=\"input-column\">\n            <div className=\"section-header\">\n              <h2>Current Block</h2>\n              <div className=\"date-picker\">\n                <input\n                  type=\"date\"\n                  value={currentDate}\n                  onChange={(e) => setCurrentDate(e.target.value)}\n                />\n              </div>\n            </div>\n\n            <div className=\"input-blocks-area\">\n              {/* Editing Block (shows when going back in time) */}\n              {editingBlock && (\n                <div className={`time-block editing-block ${editingBlock.isBreak ? 'break-block' : ''} ${swipingBlockId === editingBlock.id ? 'swiping-out' : ''}`}>\n                  <div className=\"block-header\">\n                    <span className=\"block-number\">Editing Block</span>\n                    <div className=\"edit-controls\">\n                      <button type=\"button\" className=\"btn-cancel-edit\" onClick={handleCancelEdit}>\n                        Cancel\n                      </button>\n                      <button type=\"button\" className=\"btn-save-edit\" onClick={handleSaveEdit}>\n                        Save\n                      </button>\n                    </div>\n                  </div>\n                  <div className=\"block-times\">\n                    <div className=\"time-field\">\n                      <label>Start</label>\n                      <div className=\"time-input-group\">\n                        <input\n                          type=\"time\"\n                          value={editingBlock.startTime}\n                          onChange={(e) => updateEditingBlock('startTime', e.target.value)}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"time-field\">\n                      <label>End</label>\n                      <div className=\"time-input-group\">\n                        <input\n                          type=\"time\"\n                          value={editingBlock.endTime}\n                          onChange={(e) => updateEditingBlock('endTime', e.target.value)}\n                        />\n                        <button\n                          type=\"button\"\n                          className=\"btn-now\"\n                          onClick={() => updateEditingBlock('endTime', getEndTimeWithOffset(editingBlock.startTime))}\n                        >\n                          Now{(nowOffsetHours > 0 || nowOffsetMins > 0) ? '+' : ''}\n                        </button>\n                      </div>\n                      <div className=\"time-increment-btns\">\n                        <button\n                          type=\"button\"\n                          className=\"btn-increment\"\n                          onClick={() => incrementEndTime(editingBlock, updateEditingBlock, 15)}\n                        >\n                          +15m\n                        </button>\n                        <button\n                          type=\"button\"\n                          className=\"btn-increment\"\n                          onClick={() => incrementEndTime(editingBlock, updateEditingBlock, 60)}\n                        >\n                          +1hr\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  {/* Hide task input for breaks */}\n                  {!editingBlock.isBreak && (\n                    <div className=\"task-field\">\n                      <label>Tasks</label>\n                      {editingTasks.map((task, index) => (\n                        <div key={index} className=\"task-input-row\">\n                          <input\n                            type=\"text\"\n                            value={task}\n                            onChange={(e) => {\n                              const newTasks = [...editingTasks];\n                              newTasks[index] = e.target.value;\n                              setEditingTasks(newTasks);\n                            }}\n                            placeholder={index === 0 ? \"What did you work on?\" : \"Another task...\"}\n                          />\n                          {editingTasks.length > 1 && (\n                            <button\n                              type=\"button\"\n                              className=\"btn-remove-task\"\n                              onClick={() => {\n                                const newTasks = editingTasks.filter((_, i) => i !== index);\n                                setEditingTasks(newTasks);\n                              }}\n                            >\n                              −\n                            </button>\n                          )}\n                        </div>\n                      ))}\n                      <button\n                        type=\"button\"\n                        className=\"btn-add-task\"\n                        onClick={() => setEditingTasks([...editingTasks, ''])}\n                      >\n                        + Add Task\n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Current Block (main input) */}\n              {currentBlock ? (\n                <div className={`time-block current-block ${currentBlock.isBreak ? 'break-block' : ''} ${swipingBlockId === currentBlock.id ? 'swiping-out' : ''}`}>\n                  <div className=\"block-header\">\n                    <span className=\"block-number\">Block {blockCount}</span>\n                    {calculateBlockHours(currentBlock.startTime, currentBlock.endTime) && (\n                      <span className=\"block-hours\">\n                        {calculateBlockHours(currentBlock.startTime, currentBlock.endTime)} hrs\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"block-times\">\n                    <div className=\"time-field\">\n                      <label>Start{completedBlocks.length > 0 }</label>\n                      <div className=\"time-input-group\">\n                        <input\n                          type=\"time\"\n                          value={currentBlock.startTime}\n                          onChange={(e) => !completedBlocks.length && updateCurrentBlock('startTime', e.target.value)}\n                          readOnly={completedBlocks.length > 0}\n                          className={completedBlocks.length > 0 ? 'locked-input' : ''}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"time-field\">\n                      <label>End</label>\n                      <div className=\"time-input-group\">\n                        <input\n                          type=\"time\"\n                          value={currentBlock.endTime}\n                          onChange={(e) => updateCurrentBlock('endTime', e.target.value)}\n                        />\n                        <button\n                          type=\"button\"\n                          className=\"btn-now\"\n                          onClick={() => updateCurrentBlock('endTime', getEndTimeWithOffset(currentBlock.startTime))}\n                        >\n                          Now{(nowOffsetHours > 0 || nowOffsetMins > 0) ? '+' : ''}\n                        </button>\n                      </div>\n                      <div className=\"time-increment-btns\">\n                        <button\n                          type=\"button\"\n                          className=\"btn-increment\"\n                          onClick={() => incrementEndTime(currentBlock, updateCurrentBlock, 15)}\n                        >\n                          +15m\n                        </button>\n                        <button\n                          type=\"button\"\n                          className=\"btn-increment\"\n                          onClick={() => incrementEndTime(currentBlock, updateCurrentBlock, 60)}\n                        >\n                          +1hr\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"task-field\">\n                    <label>Tasks</label>\n                    {currentTasks.map((task, index) => (\n                      <div key={index} className=\"task-input-row\">\n                        <input\n                          type=\"text\"\n                          value={task}\n                          onChange={(e) => {\n                            const newTasks = [...currentTasks];\n                            newTasks[index] = e.target.value;\n                            setCurrentTasks(newTasks);\n                          }}\n                          placeholder={index === 0 ? \"What did you work on?\" : \"Another task...\"}\n                        />\n                        {currentTasks.length > 1 && (\n                          <button\n                            type=\"button\"\n                            className=\"btn-remove-task\"\n                            onClick={() => {\n                              const newTasks = currentTasks.filter((_, i) => i !== index);\n                              setCurrentTasks(newTasks);\n                            }}\n                          >\n                            −\n                          </button>\n                        )}\n                      </div>\n                    ))}\n                    <button\n                      type=\"button\"\n                      className=\"btn-add-task\"\n                      onClick={() => setCurrentTasks([...currentTasks, ''])}\n                    >\n                      + Add Task\n                    </button>\n                  </div>\n                  <div className=\"block-actions\">\n                    {!currentBlock.isBreak && (\n                      <button type=\"button\" className=\"btn-break\" onClick={handleBreak}>\n                        + Break\n                      </button>\n                    )}\n                    <button\n                      type=\"button\"\n                      className=\"btn-advance\"\n                      onClick={handleAdvanceBlock}\n                      disabled={!currentBlock.endTime || !currentTasks.some(t => t.trim())}\n                    >\n                      Next Block →\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"empty-state\">\n                  <p>Ready to start tracking</p>\n                  <button type=\"button\" className=\"btn-clock-in\" onClick={handleClockIn}>\n                    Clock In\n                  </button>\n                </div>\n              )}\n            </div>\n\n            <div className=\"shift-summary\">\n              <div className=\"total-hours\">\n                <span>Total Hours:</span>\n                <strong>{calculateTotalHours()}</strong>\n              </div>\n              <button\n                type=\"button\"\n                className=\"btn-save\"\n                onClick={previewShift}\n                disabled={(completedBlocks.length === 0 && !currentBlock) || saving}\n              >\n                {saving ? 'Saving...' : 'Clock Out'}\n              </button>\n            </div>\n          </section>\n\n          {/* Column 2 - Completed Blocks */}\n          <section className=\"completed-column\">\n            <h2>Completed Blocks</h2>\n            {completedBlocks.length === 0 ? (\n              <div className=\"empty-completed\">\n                <p>Blocks will appear here as you complete them</p>\n              </div>\n            ) : (\n              <div className=\"completed-list\">\n                {completedBlocks.map((block, index) => {\n                  // Count only work blocks for numbering\n                  const workBlockNumber = completedBlocks\n                    .slice(0, index + 1)\n                    .filter(b => !b.isBreak).length;\n                  return (\n                  <div\n                    key={block.id}\n                    className={`completed-block ${block.isBreak ? 'break-block' : ''}`}\n                  >\n                    <div className=\"completed-block-header\">\n                      <span className=\"completed-number\">\n                        {block.isBreak ? 'Break' : `Block #${workBlockNumber}`}\n                      </span>\n                      <span className=\"completed-hours\">\n                        {calculateBlockHours(block.startTime, block.endTime)} hrs\n                      </span>\n                    </div>\n                    <div className=\"completed-task\">\n                      {block.tasks.split(' • ').map((task, i) => (\n                        <div key={i} className=\"task-line\">{task}</div>\n                      ))}\n                    </div>\n                    <div className=\"completed-meta\">\n                      <span>{formatTime(block.startTime)} - {formatTime(block.endTime)}</span>\n                      <div className=\"completed-actions\">\n                        <button\n                          type=\"button\"\n                          className={`btn-edit ${block.isBreak ? 'btn-extend-break' : ''}`}\n                          onClick={() => handleEditBlock(block)}\n                          disabled={editingBlock !== null}\n                        >\n                          {block.isBreak ? 'Extend Break' : 'Edit'}\n                        </button>\n                        <button\n                          type=\"button\"\n                          className=\"btn-delete\"\n                          onClick={() => removeCompletedBlock(block.id)}\n                        >\n                          ×\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  );\n                })}\n              </div>\n            )}\n          </section>\n        </main>\n      ) : activeTab === 'history' ? (\n        /* Shift History Tab */\n        <main className=\"history-tab\">\n          <section className=\"shift-history-full\">\n            <h2>Shift History</h2>\n            {loading ? (\n              <p className=\"loading-text\">Loading shifts...</p>\n            ) : shifts.length === 0 ? (\n              <p className=\"empty-text\">No shifts recorded yet</p>\n            ) : (\n              <div className=\"history-list\">\n                {shifts.map((shift) => {\n                  const shiftId = shift._id || shift.id;\n                  const isExpanded = expandedShifts.has(shiftId);\n                  const isPending = shift.status === 'pending';\n                  return (\n                    <div key={shiftId} className={`history-item ${isExpanded ? 'expanded' : ''} ${isPending ? 'pending-shift' : ''}`}>\n                      <div className=\"history-header\">\n                        <div\n                          className=\"history-header-left\"\n                          onClick={() => toggleShiftExpanded(shiftId)}\n                        >\n                          <span className=\"expand-icon\">{isExpanded ? '▼' : '▶'}</span>\n                          {isPending && <span className=\"status-badge pending\">In Progress</span>}\n                          <span className=\"history-date\">{formatDate(shift.date)}</span>\n                          <span className=\"history-times-inline\">\n                            {formatTime(shift.clockInTime)} - {isPending ? 'Active' : formatTime(shift.clockOutTime)}\n                          </span>\n                        </div>\n                        <div className=\"history-header-right\">\n                          <span className=\"history-hours\">{isPending ? '--' : shift.totalHours} hrs</span>\n                          <button\n                            type=\"button\"\n                            className=\"btn-delete-shift\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              if (window.confirm('Delete this shift?')) {\n                                shiftsAPI.delete(shiftId).then(() => {\n                                  setShifts(shifts.filter(s => (s._id || s.id) !== shiftId));\n                                }).catch(err => alert('Failed to delete: ' + err.message));\n                              }\n                            }}\n                          >\n                            ×\n                          </button>\n                        </div>\n                      </div>\n                      {isExpanded && shift.timeBlocks && shift.timeBlocks.length > 0 && (\n                        <div className=\"history-tasks\">\n                          {shift.timeBlocks.map((block, i) => (\n                            <div key={i} className={`history-task ${block.isBreak ? 'break-task' : ''}`}>\n                              <span className=\"task-time\">\n                                {formatTime(block.startTime)} - {formatTime(block.endTime)}\n                              </span>\n                              <span className=\"task-text\">\n                                {block.tasks.split(' • ').map((task, j) => (\n                                  <span key={j} className=\"task-line-inline\">{task}</span>\n                                ))}\n                              </span>\n                              {calculateBlockHours(block.startTime, block.endTime) && (\n                                <span className=\"task-hours\">{calculateBlockHours(block.startTime, block.endTime)}h</span>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </section>\n        </main>\n      ) : (\n        /* Admin Panel */\n        <main className=\"admin-panel\">\n          {/* Admin Toast */}\n          {adminToast && (\n            <div className={`admin-toast ${adminToast.type}`}>\n              {adminToast.message}\n              <button onClick={() => setAdminToast(null)}>&times;</button>\n            </div>\n          )}\n\n          {/* Delete Confirmation Modal */}\n          {deleteConfirm && (\n            <div className=\"modal-overlay\" onClick={() => { setDeleteConfirm(null); setDeleteConfirmText(''); }}>\n              <div className=\"preview-modal delete-modal\" onClick={e => e.stopPropagation()}>\n                <div className=\"modal-header\">\n                  <h2>Confirm Delete</h2>\n                  <button className=\"modal-close\" onClick={() => { setDeleteConfirm(null); setDeleteConfirmText(''); }}>&times;</button>\n                </div>\n                <div className=\"modal-body\">\n                  <p className=\"delete-warning\">This action cannot be undone. Type <strong>DELETE</strong> to confirm.</p>\n                  <input\n                    type=\"text\"\n                    value={deleteConfirmText}\n                    onChange={e => setDeleteConfirmText(e.target.value)}\n                    placeholder=\"Type DELETE to confirm\"\n                    className=\"delete-confirm-input\"\n                  />\n                </div>\n                <div className=\"modal-footer\">\n                  <button className=\"btn-cancel-modal\" onClick={() => { setDeleteConfirm(null); setDeleteConfirmText(''); }}>Cancel</button>\n                  <button\n                    className=\"btn-delete-confirm\"\n                    disabled={deleteConfirmText !== 'DELETE'}\n                    onClick={() => {\n                      if (deleteConfirm.type === 'user') handleDeactivateUser(deleteConfirm.id);\n                      else if (deleteConfirm.type === 'shift') handleDeleteShift(deleteConfirm.id);\n                      else if (deleteConfirm.type === 'row') handleDeleteRow(deleteConfirm.table, deleteConfirm.id);\n                    }}\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Edit User Modal */}\n          {editingUser && (\n            <div className=\"modal-overlay\" onClick={() => setEditingUser(null)}>\n              <div className=\"preview-modal edit-modal\" onClick={e => e.stopPropagation()}>\n                <div className=\"modal-header\">\n                  <h2>Edit User</h2>\n                  <button className=\"modal-close\" onClick={() => setEditingUser(null)}>&times;</button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-field\">\n                    <label>Name</label>\n                    <input type=\"text\" value={editingUser.name} onChange={e => setEditingUser({...editingUser, name: e.target.value})} />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Email</label>\n                    <input type=\"email\" value={editingUser.email} onChange={e => setEditingUser({...editingUser, email: e.target.value})} />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Status</label>\n                    <select value={editingUser.status} onChange={e => setEditingUser({...editingUser, status: e.target.value})}>\n                      <option value=\"active\">Active</option>\n                      <option value=\"inactive\">Inactive</option>\n                    </select>\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Role</label>\n                    <select value={editingUser.role} onChange={e => setEditingUser({...editingUser, role: e.target.value})}>\n                      <option value=\"user\">User</option>\n                      <option value=\"admin\">Admin</option>\n                    </select>\n                  </div>\n                </div>\n                <div className=\"modal-footer\" style={{ justifyContent: 'space-between' }}>\n                  <button\n                    className=\"btn-secondary\"\n                    onClick={() => {\n                      setResetPasswordUser(editingUser);\n                      setEditingUser(null);\n                    }}\n                    style={{ background: '#e67e22', color: 'white' }}\n                  >\n                    Reset Password\n                  </button>\n                  <div style={{ display: 'flex', gap: '8px' }}>\n                    <button className=\"btn-cancel-modal\" onClick={() => setEditingUser(null)}>Cancel</button>\n                    <button className=\"btn-confirm-modal\" onClick={() => handleUpdateUser(editingUser.id, editingUser)}>Save Changes</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Create User Modal */}\n          {creatingUser && (\n            <div className=\"modal-overlay\" onClick={() => setCreatingUser(false)}>\n              <div className=\"preview-modal edit-modal\" onClick={e => e.stopPropagation()}>\n                <div className=\"modal-header\">\n                  <h2>Create User</h2>\n                  <button className=\"modal-close\" onClick={() => setCreatingUser(false)}>&times;</button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-field\">\n                    <label>Name *</label>\n                    <input type=\"text\" value={newUserData.name} onChange={e => setNewUserData({...newUserData, name: e.target.value})} placeholder=\"Full name\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Email *</label>\n                    <input type=\"email\" value={newUserData.email} onChange={e => setNewUserData({...newUserData, email: e.target.value})} placeholder=\"email@example.com\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Password *</label>\n                    <input type=\"password\" value={newUserData.password} onChange={e => setNewUserData({...newUserData, password: e.target.value})} placeholder=\"Min 6 characters\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Role</label>\n                    <select value={newUserData.role} onChange={e => setNewUserData({...newUserData, role: e.target.value})}>\n                      <option value=\"user\">User</option>\n                      <option value=\"admin\">Admin</option>\n                    </select>\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Status</label>\n                    <select value={newUserData.status} onChange={e => setNewUserData({...newUserData, status: e.target.value})}>\n                      <option value=\"active\">Active</option>\n                      <option value=\"inactive\">Inactive</option>\n                    </select>\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button className=\"btn-cancel-modal\" onClick={() => { setCreatingUser(false); setNewUserData({ email: '', password: '', name: '', role: 'user', status: 'active' }); }}>Cancel</button>\n                  <button className=\"btn-confirm-modal\" onClick={handleCreateUser}>Create User</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Create Shift Modal */}\n          {creatingShift && (\n            <div className=\"modal-overlay\" onClick={() => setCreatingShift(false)}>\n              <div className=\"preview-modal edit-modal\" onClick={e => e.stopPropagation()} style={{ maxWidth: '700px', maxHeight: '90vh', overflow: 'auto' }}>\n                <div className=\"modal-header\">\n                  <h2>Create Shift</h2>\n                  <button className=\"modal-close\" onClick={() => setCreatingShift(false)}>&times;</button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-field\">\n                    <label>Employee *</label>\n                    <select\n                      value={newShiftData.userId}\n                      onChange={e => setNewShiftData({...newShiftData, userId: e.target.value})}\n                    >\n                      <option value=\"\">Select User</option>\n                      {adminUsers.filter(u => u.status === 'active').map(u => (\n                        <option key={u.id} value={u.id}>{u.name} ({u.email})</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Date *</label>\n                    <input\n                      type=\"date\"\n                      value={newShiftData.date}\n                      onChange={e => setNewShiftData({...newShiftData, date: e.target.value})}\n                    />\n                  </div>\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>\n                    <div className=\"form-field\">\n                      <label>Clock In *</label>\n                      <input\n                        type=\"time\"\n                        value={newShiftData.clockInTime}\n                        onChange={e => setNewShiftData({...newShiftData, clockInTime: e.target.value})}\n                      />\n                    </div>\n                    <div className=\"form-field\">\n                      <label>Clock Out</label>\n                      <input\n                        type=\"time\"\n                        value={newShiftData.clockOutTime}\n                        onChange={e => setNewShiftData({...newShiftData, clockOutTime: e.target.value})}\n                      />\n                    </div>\n                  </div>\n\n                  <div style={{ marginTop: '20px', borderTop: '1px solid #eee', paddingTop: '16px' }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\n                      <h4 style={{ margin: 0, color: '#2c3e50' }}>Time Blocks</h4>\n                      <button\n                        type=\"button\"\n                        onClick={addNewShiftBlock}\n                        style={{ background: '#9b59b6', color: 'white', border: 'none', padding: '6px 12px', borderRadius: '6px', cursor: 'pointer', fontSize: '0.85rem' }}\n                      >\n                        + Add Block\n                      </button>\n                    </div>\n\n                    {newShiftData.timeBlocks.map((block, idx) => (\n                      <div\n                        key={block.id}\n                        style={{\n                          background: block.isBreak ? '#fef9e7' : '#f8f9fa',\n                          borderRadius: '8px',\n                          padding: '12px',\n                          marginBottom: '8px',\n                          borderLeft: `3px solid ${block.isBreak ? '#f39c12' : '#9b59b6'}`\n                        }}\n                      >\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>\n                          <span style={{ fontWeight: '600', fontSize: '0.9rem' }}>Block {idx + 1}</span>\n                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n                            <label style={{ display: 'flex', alignItems: 'center', gap: '4px', fontSize: '0.85rem', color: '#666' }}>\n                              <input\n                                type=\"checkbox\"\n                                checked={block.isBreak}\n                                onChange={e => updateNewShiftBlock(block.id, 'isBreak', e.target.checked)}\n                              />\n                              Break\n                            </label>\n                            {newShiftData.timeBlocks.length > 1 && (\n                              <button\n                                type=\"button\"\n                                onClick={() => removeNewShiftBlock(block.id)}\n                                style={{ background: '#e74c3c', color: 'white', border: 'none', padding: '2px 8px', borderRadius: '4px', cursor: 'pointer', fontSize: '0.8rem' }}\n                              >\n                                Remove\n                              </button>\n                            )}\n                          </div>\n                        </div>\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '8px', marginBottom: '8px' }}>\n                          <input\n                            type=\"time\"\n                            value={block.startTime}\n                            onChange={e => updateNewShiftBlock(block.id, 'startTime', e.target.value)}\n                            placeholder=\"Start Time\"\n                            style={{ padding: '8px', borderRadius: '6px', border: '1px solid #ddd' }}\n                          />\n                          <input\n                            type=\"time\"\n                            value={block.endTime}\n                            onChange={e => updateNewShiftBlock(block.id, 'endTime', e.target.value)}\n                            placeholder=\"End Time\"\n                            style={{ padding: '8px', borderRadius: '6px', border: '1px solid #ddd' }}\n                          />\n                        </div>\n                        {!block.isBreak && (\n                          <textarea\n                            value={block.tasks}\n                            onChange={e => updateNewShiftBlock(block.id, 'tasks', e.target.value)}\n                            placeholder=\"Tasks performed during this time block...\"\n                            style={{ width: '100%', padding: '8px', borderRadius: '6px', border: '1px solid #ddd', resize: 'vertical', minHeight: '60px', fontSize: '0.9rem' }}\n                          />\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button className=\"btn-cancel-modal\" onClick={() => {\n                    setCreatingShift(false);\n                    setNewShiftData({\n                      userId: '',\n                      date: new Date().toISOString().split('T')[0],\n                      clockInTime: '08:00',\n                      clockOutTime: '17:00',\n                      timeBlocks: [{ id: Date.now(), startTime: '08:00', endTime: '17:00', tasks: '', isBreak: false }]\n                    });\n                  }}>Cancel</button>\n                  <button\n                    className=\"btn-confirm-modal\"\n                    onClick={handleCreateShift}\n                    disabled={savingShift}\n                  >\n                    {savingShift ? 'Creating...' : 'Create Shift'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Edit Shift Modal */}\n          {editingShift && (\n            <div className=\"modal-overlay\" onClick={() => setEditingShift(null)}>\n              <div className=\"preview-modal edit-modal\" onClick={e => e.stopPropagation()}>\n                <div className=\"modal-header\">\n                  <h2>Edit Shift</h2>\n                  <button className=\"modal-close\" onClick={() => setEditingShift(null)}>&times;</button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-field\">\n                    <label>Date</label>\n                    <input type=\"date\" value={editingShift.date?.split('T')[0] || editingShift.date} onChange={e => setEditingShift({...editingShift, date: e.target.value})} />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Clock In</label>\n                    <input type=\"time\" value={editingShift.clock_in_time?.substring(0,5) || ''} onChange={e => setEditingShift({...editingShift, clockInTime: e.target.value})} />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Clock Out</label>\n                    <input type=\"time\" value={editingShift.clock_out_time?.substring(0,5) || ''} onChange={e => setEditingShift({...editingShift, clockOutTime: e.target.value})} />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Total Hours</label>\n                    <input type=\"number\" step=\"0.01\" value={editingShift.total_hours || ''} onChange={e => setEditingShift({...editingShift, totalHours: e.target.value})} />\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button className=\"btn-cancel-modal\" onClick={() => setEditingShift(null)}>Cancel</button>\n                  <button className=\"btn-confirm-modal\" onClick={() => handleUpdateShift(editingShift.id, editingShift)}>Save Changes</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Edit Row Modal */}\n          {editingRow && (\n            <div className=\"modal-overlay\" onClick={() => setEditingRow(null)}>\n              <div className=\"preview-modal edit-modal\" onClick={e => e.stopPropagation()}>\n                <div className=\"modal-header\">\n                  <h2>Edit Row</h2>\n                  <button className=\"modal-close\" onClick={() => setEditingRow(null)}>&times;</button>\n                </div>\n                <div className=\"modal-body\">\n                  {tableData.schema?.filter(col => !col.isProtected && !col.isRedacted).map(col => (\n                    <div key={col.column_name} className=\"form-field\">\n                      <label>{col.column_name}</label>\n                      <input\n                        type={col.data_type.includes('int') ? 'number' : 'text'}\n                        value={editingRow[col.column_name] ?? ''}\n                        onChange={e => setEditingRow({...editingRow, [col.column_name]: e.target.value})}\n                      />\n                    </div>\n                  ))}\n                </div>\n                <div className=\"modal-footer\">\n                  <button className=\"btn-cancel-modal\" onClick={() => setEditingRow(null)}>Cancel</button>\n                  <button className=\"btn-confirm-modal\" onClick={() => handleUpdateRow(selectedTable, editingRow.id, editingRow)}>Save Changes</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Admin Sub-Navigation */}\n          <div className=\"admin-sub-nav\">\n            <button className={`admin-sub-tab ${adminSubTab === 'dashboard' ? 'active' : ''}`} onClick={() => setAdminSubTab('dashboard')}>Dashboard</button>\n            <button className={`admin-sub-tab ${adminSubTab === 'users' ? 'active' : ''}`} onClick={() => setAdminSubTab('users')}>Users</button>\n            <button className={`admin-sub-tab ${adminSubTab === 'shifts' ? 'active' : ''}`} onClick={() => setAdminSubTab('shifts')}>Shifts</button>\n            <button className={`admin-sub-tab ${adminSubTab === 'reports' ? 'active' : ''}`} onClick={() => setAdminSubTab('reports')}>Reports</button>\n            <button className={`admin-sub-tab ${adminSubTab === 'database' ? 'active' : ''}`} onClick={() => setAdminSubTab('database')}>Data Browser</button>\n          </div>\n\n          {/* Dashboard Sub-Tab */}\n          {adminSubTab === 'dashboard' && (\n            <div className=\"admin-content\">\n              {adminLoading ? (\n                <p className=\"loading-text\">Loading dashboard...</p>\n              ) : dashboardData ? (\n                <>\n                  <div className=\"stats-grid\">\n                    <div className=\"stat-card\">\n                      <div className=\"stat-value\">{dashboardData.totalUsers}</div>\n                      <div className=\"stat-label\">Total Users</div>\n                    </div>\n                    <div className=\"stat-card\">\n                      <div className=\"stat-value\">{dashboardData.activeUsers}</div>\n                      <div className=\"stat-label\">Active This Week</div>\n                    </div>\n                    <div className=\"stat-card\">\n                      <div className=\"stat-value\">{dashboardData.hoursToday?.toFixed(1) || 0}</div>\n                      <div className=\"stat-label\">Hours Today</div>\n                    </div>\n                    <div className=\"stat-card\">\n                      <div className=\"stat-value\">{dashboardData.hoursThisWeek?.toFixed(1) || 0}</div>\n                      <div className=\"stat-label\">Hours This Week</div>\n                    </div>\n                    <div className=\"stat-card\">\n                      <div className=\"stat-value\">{dashboardData.hoursThisMonth?.toFixed(1) || 0}</div>\n                      <div className=\"stat-label\">Hours This Month</div>\n                    </div>\n                  </div>\n\n                  <div className=\"dashboard-sections\">\n                    <div className=\"dashboard-section\">\n                      <h3>Top Employees This Week</h3>\n                      <div className=\"top-employees-list\">\n                        {dashboardData.topEmployees?.slice(0, 5).map((emp, i) => (\n                          <div key={emp.id} className=\"top-employee\">\n                            <span className=\"rank\">#{i + 1}</span>\n                            <span className=\"name\">{emp.name}</span>\n                            <span className=\"hours\">{emp.hours?.toFixed(1) || 0} hrs</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"dashboard-section\">\n                      <h3>Recent Activity</h3>\n                      <div className=\"activity-list\">\n                        {dashboardData.recentActivity?.slice(0, 10).map((activity, i) => {\n                          const targetName = activity.target_name || 'Unknown';\n                          const adminName = activity.admin_name || 'Admin';\n\n                          const formatAction = () => {\n                            switch (activity.action) {\n                              case 'user_created':\n                                return <><strong>{adminName}</strong> added new employee <strong>{targetName}</strong></>;\n                              case 'user_updated':\n                                return <><strong>{adminName}</strong> updated <strong>{targetName}</strong></>;\n                              case 'user_deactivated':\n                                return <><strong>{adminName}</strong> deactivated <strong>{targetName}</strong></>;\n                              case 'user_activated':\n                                return <><strong>{adminName}</strong> reactivated <strong>{targetName}</strong></>;\n                              case 'user_password_reset':\n                                return <><strong>{adminName}</strong> reset password for <strong>{targetName}</strong></>;\n                              case 'shift_created':\n                                return <><strong>{adminName}</strong> created shift for <strong>{targetName}</strong></>;\n                              case 'shift_updated':\n                                return <><strong>{adminName}</strong> edited <strong>{targetName}'s</strong> shift</>;\n                              case 'shift_deleted':\n                                return <><strong>{adminName}</strong> deleted <strong>{targetName}'s</strong> shift</>;\n                              default:\n                                return <><strong>{adminName}</strong> {activity.action.replace(/_/g, ' ')} <strong>{targetName}</strong></>;\n                            }\n                          };\n\n                          return (\n                            <div key={i} className=\"activity-item\">\n                              <span className=\"activity-description\">{formatAction()}</span>\n                              <span className=\"activity-time\">{new Date(activity.created_at).toLocaleString()}</span>\n                            </div>\n                          );\n                        })}\n                        {(!dashboardData.recentActivity || dashboardData.recentActivity.length === 0) && (\n                          <p className=\"empty-text\">No recent admin activity</p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <button className=\"btn-confirm-modal\" onClick={loadDashboard}>Load Dashboard</button>\n              )}\n            </div>\n          )}\n\n          {/* Users Sub-Tab */}\n          {adminSubTab === 'users' && (\n            <div className=\"admin-content\">\n              <div className=\"admin-header-bar\">\n                <button className=\"btn-create\" onClick={() => setCreatingUser(true)}>+ Create User</button>\n              </div>\n              {adminUsersLoading ? (\n                <p className=\"loading-text\">Loading users...</p>\n              ) : (\n                <>\n                  <div className=\"admin-table-container\">\n                    <table className=\"admin-table\">\n                      <thead>\n                        <tr>\n                          <th>ID</th>\n                          <th>Name</th>\n                          <th>Email</th>\n                          <th>Role</th>\n                          <th>Status</th>\n                          <th>Created</th>\n                          <th>Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {adminUsers.map(u => (\n                          <tr key={u.id} className={u.status === 'inactive' ? 'inactive-row' : ''}>\n                            <td>{u.id}</td>\n                            <td>{u.name}</td>\n                            <td>{u.email}</td>\n                            <td><span className={`role-badge ${u.role}`}>{u.role}</span></td>\n                            <td><span className={`status-badge ${u.status}`}>{u.status}</span></td>\n                            <td>{new Date(u.created_at).toLocaleDateString()}</td>\n                            <td className=\"action-cell\">\n                              <button className=\"btn-edit-small\" onClick={() => setEditingUser({...u})}>Edit</button>\n                              {u.id !== user.id && (\n                                <button className=\"btn-delete-small\" onClick={() => setDeleteConfirm({ type: 'user', id: u.id })}>Deactivate</button>\n                              )}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                  {adminUsersPagination.totalPages > 1 && (\n                    <div className=\"pagination\">\n                      <button disabled={adminUsersPagination.page <= 1} onClick={() => loadAdminUsers(adminUsersPagination.page - 1)}>Prev</button>\n                      <span>Page {adminUsersPagination.page} of {adminUsersPagination.totalPages}</span>\n                      <button disabled={adminUsersPagination.page >= adminUsersPagination.totalPages} onClick={() => loadAdminUsers(adminUsersPagination.page + 1)}>Next</button>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Shifts Sub-Tab */}\n          {adminSubTab === 'shifts' && (\n            viewingShift ? (\n              /* Full Page Shift Details */\n              <div className=\"shift-detail-page\">\n                <div className=\"breadcrumb-nav\">\n                  <button className=\"breadcrumb-link\" onClick={() => setViewingShift(null)}>\n                    ← Back to Shifts\n                  </button>\n                  <span className=\"breadcrumb-separator\">/</span>\n                  <span className=\"breadcrumb-current\">Shift #{viewingShift.id}</span>\n                </div>\n\n                <div className=\"shift-detail-two-column\">\n                {/* Column 1: Shift Details */}\n                <div className=\"shift-detail-card\">\n                  <div className=\"shift-detail-card-header\">\n                    <h2>Shift Details</h2>\n                    <div className=\"shift-detail-actions\">\n                      <button className=\"btn-edit-small\" onClick={() => { setEditingShift({...viewingShift}); }}>Edit</button>\n                      <button className=\"btn-delete-small\" onClick={() => setDeleteConfirm({ type: 'shift', id: viewingShift.id })}>Delete</button>\n                    </div>\n                  </div>\n\n                  <div className=\"shift-details-list\">\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Employee</span>\n                      <span className=\"detail-value\">{viewingShift.user_name}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Email</span>\n                      <span className=\"detail-value\">{viewingShift.user_email}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Date</span>\n                      <span className=\"detail-value\">{formatDate(viewingShift.date)}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Clock In</span>\n                      <span className=\"detail-value\">{formatTime(viewingShift.clock_in_time)}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Clock Out</span>\n                      <span className=\"detail-value\">{formatTime(viewingShift.clock_out_time) || '-'}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Total Hours</span>\n                      <span className=\"detail-value highlight\">{viewingShift.total_hours || '0'} hrs</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Status</span>\n                      <span className={`status-badge ${viewingShift.status}`}>{viewingShift.status}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Shift ID</span>\n                      <span className=\"detail-value\">#{viewingShift.id}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Column 2: Time Blocks */}\n                <div className=\"time-blocks-card\">\n                  <h3>Time Blocks ({viewingShift.timeBlocks?.length || 0})</h3>\n                  {viewingShift.timeBlocks && viewingShift.timeBlocks.length > 0 ? (\n                    <div className=\"time-blocks-stack\">\n                      {viewingShift.timeBlocks.map((block, idx) => (\n                        <div key={block.id || idx} className={`time-block-row ${block.is_break ? 'break' : ''}`}>\n                          <span className=\"block-time-col\">{formatTime(block.start_time)} → {formatTime(block.end_time) || '...'}</span>\n                          {block.is_break ? (\n                            <span className=\"block-task-col break-text\">Break</span>\n                          ) : (\n                            <span className=\"block-task-col\">{block.tasks || '-'}</span>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"no-time-blocks\">No time blocks recorded for this shift</p>\n                  )}\n                </div>\n              </div>\n            </div>\n            ) : (\n              /* Shifts List */\n              <div className=\"admin-content\">\n                <div className=\"filters-bar\" style={{ justifyContent: 'space-between' }}>\n                  <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n                    <input\n                      type=\"date\"\n                      placeholder=\"Start Date\"\n                      value={adminShiftsFilters.startDate}\n                      onChange={e => setAdminShiftsFilters({...adminShiftsFilters, startDate: e.target.value})}\n                    />\n                    <input\n                      type=\"date\"\n                      placeholder=\"End Date\"\n                      value={adminShiftsFilters.endDate}\n                      onChange={e => setAdminShiftsFilters({...adminShiftsFilters, endDate: e.target.value})}\n                    />\n                    <button className=\"btn-filter\" onClick={() => loadAdminShifts(1)}>Apply Filters</button>\n                    <button className=\"btn-clear-filter\" onClick={() => { setAdminShiftsFilters({ userId: '', startDate: '', endDate: '' }); loadAdminShifts(1); }}>Clear</button>\n                  </div>\n                  <button className=\"btn-create\" onClick={() => { if (adminUsers.length === 0) loadAdminUsers(); setCreatingShift(true); }}>+ Create Shift</button>\n                </div>\n\n                {adminLoading ? (\n                  <p className=\"loading-text\">Loading shifts...</p>\n                ) : (\n                  <>\n                    <div className=\"admin-table-container\">\n                      <table className=\"admin-table\">\n                        <thead>\n                          <tr>\n                            <th>ID</th>\n                            <th>User</th>\n                            <th>Date</th>\n                            <th>Clock In</th>\n                            <th>Clock Out</th>\n                            <th>Hours</th>\n                            <th>Status</th>\n                            <th>Actions</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {adminShifts.map(s => (\n                            <tr\n                              key={s.id}\n                              className=\"clickable-row\"\n                              onClick={() => viewShiftDetails(s.id)}\n                            >\n                              <td>{s.id}</td>\n                              <td>{s.userName || s.user_name}</td>\n                              <td>{formatDate(s.date)}</td>\n                              <td>{formatTime(s.clock_in_time)}</td>\n                              <td>{formatTime(s.clock_out_time)}</td>\n                              <td>{s.total_hours}</td>\n                              <td><span className={`status-badge ${s.status}`}>{s.status}</span></td>\n                              <td className=\"action-cell\" onClick={e => e.stopPropagation()}>\n                                <button className=\"btn-edit-small\" onClick={() => setEditingShift({...s})}>Edit</button>\n                                <button className=\"btn-delete-small\" onClick={() => setDeleteConfirm({ type: 'shift', id: s.id })}>Delete</button>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                    {adminShiftsPagination.totalPages > 1 && (\n                      <div className=\"pagination\">\n                        <button disabled={adminShiftsPagination.page <= 1} onClick={() => loadAdminShifts(adminShiftsPagination.page - 1)}>Prev</button>\n                        <span>Page {adminShiftsPagination.page} of {adminShiftsPagination.totalPages}</span>\n                        <button disabled={adminShiftsPagination.page >= adminShiftsPagination.totalPages} onClick={() => loadAdminShifts(adminShiftsPagination.page + 1)}>Next</button>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            )\n          )}\n\n          {/* Reports Sub-Tab */}\n          {adminSubTab === 'reports' && (\n            <div className=\"admin-content\">\n              <div className=\"reports-section\">\n                <h3>Export Data</h3>\n                <div className=\"filters-bar\">\n                  <input\n                    type=\"date\"\n                    placeholder=\"Start Date\"\n                    value={adminShiftsFilters.startDate}\n                    onChange={e => setAdminShiftsFilters({...adminShiftsFilters, startDate: e.target.value})}\n                  />\n                  <input\n                    type=\"date\"\n                    placeholder=\"End Date\"\n                    value={adminShiftsFilters.endDate}\n                    onChange={e => setAdminShiftsFilters({...adminShiftsFilters, endDate: e.target.value})}\n                  />\n                </div>\n                <div className=\"export-buttons\">\n                  <button className=\"btn-export\" onClick={() => handleExport('shifts')}>Export Shifts (CSV)</button>\n                  <button className=\"btn-export\" onClick={() => handleExport('users')}>Export Users (CSV)</button>\n                  <button className=\"btn-export\" onClick={() => handleExport('hours')}>Export Hours Summary (CSV)</button>\n                  <button className=\"btn-export\" onClick={() => handleExport('timeblocks')}>Export Time Blocks (CSV)</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Database Browser Sub-Tab */}\n          {adminSubTab === 'database' && (\n            <div className=\"admin-content\">\n              <div className=\"db-browser\">\n                <div className=\"db-sidebar\">\n                  <h3>Tables</h3>\n                  {tableLoading && !dbTables.length ? (\n                    <p className=\"loading-text\">Loading tables...</p>\n                  ) : (\n                    <ul className=\"table-list\">\n                      {dbTables.map(t => (\n                        <li\n                          key={t.name}\n                          className={`table-item ${selectedTable === t.name ? 'selected' : ''} ${!t.writable ? 'readonly' : ''}`}\n                          onClick={() => loadTableData(t.name)}\n                        >\n                          <span className=\"table-name\">{t.name}</span>\n                          <span className=\"table-count\">{t.rowCount} rows</span>\n                          {!t.writable && <span className=\"readonly-badge\">Read-only</span>}\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </div>\n\n                <div className=\"db-content\">\n                  {!selectedTable ? (\n                    <p className=\"empty-text\">Select a table to browse data</p>\n                  ) : tableLoading ? (\n                    <p className=\"loading-text\">Loading data...</p>\n                  ) : (\n                    <>\n                      <h3>{selectedTable} <span className=\"table-info\">({tableData.pagination?.total || 0} rows)</span></h3>\n                      <div className=\"admin-table-container\">\n                        <table className=\"admin-table db-table\">\n                          <thead>\n                            <tr>\n                              {tableData.schema?.map(col => (\n                                <th key={col.column_name} className={col.isRedacted ? 'redacted' : ''}>\n                                  {col.column_name}\n                                  {col.isProtected && <span className=\"protected-icon\" title=\"Protected\">*</span>}\n                                </th>\n                              ))}\n                              {tableData.config?.writable && <th>Actions</th>}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {tableData.rows?.map(row => (\n                              <tr key={row.id}>\n                                {tableData.schema?.map(col => (\n                                  <td key={col.column_name} className={col.isRedacted ? 'redacted-cell' : ''}>\n                                    {col.isRedacted ? '[REDACTED]' : (\n                                      typeof row[col.column_name] === 'object'\n                                        ? JSON.stringify(row[col.column_name])\n                                        : String(row[col.column_name] ?? '')\n                                    )}\n                                  </td>\n                                ))}\n                                {tableData.config?.writable && (\n                                  <td className=\"action-cell\">\n                                    <button className=\"btn-edit-small\" onClick={() => setEditingRow({...row})}>Edit</button>\n                                    {tableData.config?.deleteAllowed && (\n                                      <button className=\"btn-delete-small\" onClick={() => setDeleteConfirm({ type: 'row', table: selectedTable, id: row.id })}>Delete</button>\n                                    )}\n                                  </td>\n                                )}\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                      {tableData.pagination?.totalPages > 1 && (\n                        <div className=\"pagination\">\n                          <button disabled={tableData.pagination.page <= 1} onClick={() => loadTableData(selectedTable, tableData.pagination.page - 1)}>Prev</button>\n                          <span>Page {tableData.pagination.page} of {tableData.pagination.totalPages}</span>\n                          <button disabled={tableData.pagination.page >= tableData.pagination.totalPages} onClick={() => loadTableData(selectedTable, tableData.pagination.page + 1)}>Next</button>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </main>\n      )}\n    </div>\n  );\n}\n\nfunction AppContent() {\n  const { isAuthenticated, loading } = useAuth();\n  const [showRegister, setShowRegister] = useState(() => {\n    return window.location.pathname === '/register';\n  });\n\n  const handleSwitchToLogin = () => {\n    setShowRegister(false);\n    window.history.pushState({}, '', '/');\n  };\n\n  const handleSwitchToRegister = () => {\n    setShowRegister(true);\n    window.history.pushState({}, '', '/register');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-screen\">\n        <h1>Time Clock</h1>\n        <p>Loading...</p>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return showRegister ? (\n      <Register onSwitchToLogin={handleSwitchToLogin} />\n    ) : (\n      <Login onSwitchToRegister={handleSwitchToRegister} />\n    );\n  }\n\n  return <TimeClock />;\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}